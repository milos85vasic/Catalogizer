import{j as e,B as v,u as S,a as z,z as b}from"./index-BzqIBI_1.js";import{r as N}from"./router-CYAiCCsK.js";import{C as h,a as u,b as p,d as j}from"./Card-pVNkGvZm.js";import{D as I,h as B,P as O,Z as E,i as D,j as R,C as L,T as F,k as q,l as C,n as w,f as V,c as U,o as H,p as $,q as J,m as f,S as Q}from"./ui-DhyrEzjX.js";import{R as G,a as K,b as Y,C as Z,T as W,L as X}from"./charts-BaIhTcLh.js";import{f as ee}from"./utils-B26ZFImD.js";import{m as P}from"./mediaApi-7GevB2yo.js";const x=({title:s,value:a,icon:r,trend:c,description:d,loading:i=!1})=>e.jsxs(h,{className:"relative overflow-hidden",children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:s}),e.jsx(r,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i?e.jsx("div",{className:"h-8 w-20 bg-gray-200 animate-pulse rounded"}):a}),(c||d)&&e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground mt-1",children:[c&&e.jsxs("div",{className:`flex items-center space-x-1 ${c.isPositive?"text-green-600":"text-red-600"}`,children:[c.isPositive?e.jsx(F,{className:"h-3 w-3"}):e.jsx(q,{className:"h-3 w-3"}),e.jsxs("span",{children:[Math.abs(c.value),"%"]})]}),d&&e.jsx("span",{children:d})]})]}),e.jsx("div",{className:"absolute top-0 right-0 -z-10 opacity-10",children:e.jsx(r,{className:"h-16 w-16"})})]}),se=({mediaStats:s,userStats:a,loading:r=!1})=>{const c=i=>{const l=["B","KB","MB","GB","TB"];if(i===0)return"0 B";const n=Math.floor(Math.log(i)/Math.log(1024));return`${Math.round(i/Math.pow(1024,n)*100)/100} ${l[n]}`},d=i=>{if(i<60)return`${i}m`;const l=Math.floor(i/60),n=i%60;return`${l}h ${n}m`};return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(x,{title:"Total Media",value:(s==null?void 0:s.total_items.toLocaleString())||"0",icon:I,trend:{value:12.5,isPositive:!0},description:"vs last month",loading:r}),e.jsx(x,{title:"Storage Used",value:c((s==null?void 0:s.total_size)||0),icon:B,trend:{value:8.2,isPositive:!0},description:"vs last month",loading:r}),e.jsx(x,{title:"Recent Additions",value:(s==null?void 0:s.recent_additions)||0,icon:O,trend:{value:15.3,isPositive:!0},description:"last 7 days",loading:r}),e.jsx(x,{title:"Quality Score",value:"HD",icon:E,trend:{value:5.7,isPositive:!0},description:"average quality",loading:r}),e.jsx(x,{title:"Active Users",value:(a==null?void 0:a.active_users.toLocaleString())||"0",icon:D,trend:{value:3.2,isPositive:!0},description:"online now",loading:r}),e.jsx(x,{title:"Total Users",value:(a==null?void 0:a.total_users.toLocaleString())||"0",icon:D,trend:{value:18.7,isPositive:!0},description:"registered users",loading:r}),e.jsx(x,{title:"Sessions Today",value:(a==null?void 0:a.sessions_today.toLocaleString())||"0",icon:R,trend:{value:22.1,isPositive:!0},description:"viewing sessions",loading:r}),e.jsx(x,{title:"Avg Session",value:d((a==null?void 0:a.avg_session_duration)||0),icon:L,trend:{value:7.5,isPositive:!1},description:"viewing duration",loading:r})]})},M={video:"#3b82f6",audio:"#10b981",image:"#f59e0b",document:"#6b7280",other:"#ef4444"},ae=({data:s,loading:a=!1})=>{const c=s?Object.entries(s).map(([l,n])=>({name:l.charAt(0).toUpperCase()+l.slice(1),value:n,color:M[l]||M.other})):[],d=({active:l,payload:n})=>{if(l&&n&&n.length){const m=n[0].payload,g=c.reduce((o,y)=>o+y.value,0),t=(m.value/g*100).toFixed(1);return e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:m.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[m.value.toLocaleString()," files (",t,"%)"]})]})}return null},i=({cx:l,cy:n,midAngle:m,innerRadius:g,outerRadius:t,percent:o})=>{const y=Math.PI/180,_=g+(t-g)*.5,A=l+_*Math.cos(-m*y),T=n+_*Math.sin(-m*y);return o<.05?null:e.jsx("text",{x:A,y:T,fill:"white",textAnchor:A>l?"start":"end",dominantBaseline:"central",className:"text-xs font-medium",children:`${(o*100).toFixed(0)}%`})};return a?e.jsxs(h,{children:[e.jsx(u,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Media Distribution"]})}),e.jsx(j,{children:e.jsx("div",{className:"h-80 flex items-center justify-center",children:e.jsxs("div",{className:"animate-pulse space-y-4 w-full",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mx-auto"}),e.jsx("div",{className:"h-48 bg-gray-200 rounded-full mx-auto"}),e.jsxs("div",{className:"flex space-x-4 justify-center",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]})})})]}):!c||c.length===0?e.jsxs(h,{children:[e.jsx(u,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Media Distribution"]})}),e.jsx(j,{children:e.jsx("div",{className:"h-80 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(C,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No media data available"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Media will appear here once scanned"})]})})})]}):e.jsxs(h,{children:[e.jsx(u,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Media Distribution"]})}),e.jsx(j,{children:e.jsx(G,{width:"100%",height:320,children:e.jsxs(K,{children:[e.jsx(Y,{data:c,cx:"50%",cy:"50%",labelLine:!1,label:i,outerRadius:100,fill:"#8884d8",dataKey:"value",children:c.map((l,n)=>e.jsx(Z,{fill:l.color},`cell-${n}`))}),e.jsx(W,{content:e.jsx(d,{})}),e.jsx(X,{formatter:(l,n)=>e.jsxs("span",{style:{color:n.color},children:[l,": ",n.payload.value.toLocaleString()]}),verticalAlign:"bottom",height:36})]})})})]})},te={media_played:J,media_uploaded:$,media_downloaded:H,user_login:D,system_event:U,media_viewed:V},k={media_played:"text-green-600 bg-green-100",media_uploaded:"text-blue-600 bg-blue-100",media_downloaded:"text-purple-600 bg-purple-100",user_login:"text-orange-600 bg-orange-100",system_event:"text-gray-600 bg-gray-100",media_viewed:"text-indigo-600 bg-indigo-100"},ie={media_played:s=>`Started watching "${s.title}"`,media_uploaded:s=>`Uploaded "${s.title}"`,media_downloaded:s=>`Downloaded "${s.title}"`,user_login:s=>`User "${s.username}" logged in`,system_event:s=>s.message,media_viewed:s=>`Viewed "${s.title}"`},le=({limit:s=10,showFilters:a=!0})=>{const[r,c]=N.useState([]),[d,i]=N.useState("all"),[l,n]=N.useState(!0);N.useEffect(()=>{(async()=>{try{n(!0);const o=[{id:"1",type:"media_played",title:"Sample Movie.mp4",user:"John Doe",timestamp:new Date(Date.now()-1e3*60*5),metadata:{title:"Sample Movie.mp4",duration:"2h 15m",quality:"1080p"}},{id:"2",type:"media_uploaded",title:"New Episode.mkv",user:"Jane Smith",timestamp:new Date(Date.now()-1e3*60*15),metadata:{title:"New Episode.mkv",size:"1.2GB",format:"MKV"}},{id:"3",type:"user_login",title:"User Activity",user:"Mike Johnson",timestamp:new Date(Date.now()-1e3*60*30),metadata:{username:"Mike Johnson",ip:"192.168.1.100"}},{id:"4",type:"system_event",title:"System Update",user:"System",timestamp:new Date(Date.now()-1e3*60*60),metadata:{message:"Library scan completed successfully"}}];c(o)}catch(o){console.error("Failed to fetch activities:",o)}finally{n(!1)}})()},[]);const m=r.filter(t=>d==="all"?!0:t.type===d).slice(0,s),g=({activity:t})=>{const o=te[t.type]||w,y=k[t.type]||k.system_event,_=ie[t.type]||(A=>A.title);return e.jsxs("div",{className:"flex items-start space-x-3 p-4 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${y}`,children:e.jsx(o,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:_(t.metadata)}),e.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap ml-2",children:ee(t.timestamp,{addSuffix:!0})})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:t.user}),t.type==="media_played"&&e.jsxs("span",{className:"text-xs text-gray-400",children:["• ",t.metadata.quality," • ",t.metadata.duration]}),t.type==="media_uploaded"&&e.jsxs("span",{className:"text-xs text-gray-400",children:["• ",t.metadata.size," • ",t.metadata.format]})]})]})]})};return l?e.jsxs(h,{children:[e.jsx(u,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Recent Activity"]})}),e.jsx(j,{children:e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((t,o)=>e.jsxs("div",{className:"flex items-start space-x-3 animate-pulse",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},o))})})]}):e.jsxs(h,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between",children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Recent Activity"]}),a&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{variant:d==="all"?"default":"ghost",size:"sm",onClick:()=>i("all"),children:"All"}),e.jsx(v,{variant:d==="media_played"?"default":"ghost",size:"sm",onClick:()=>i("media_played"),children:"Playing"}),e.jsx(v,{variant:d==="media_uploaded"?"default":"ghost",size:"sm",onClick:()=>i("media_uploaded"),children:"Uploads"})]})]}),e.jsxs(j,{className:"p-0",children:[m.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(w,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsxs("p",{className:"text-gray-500 text-center",children:["No recent activity",d!=="all"&&e.jsxs("span",{children:[" ","in the ",e.jsx("span",{className:"font-medium",children:d})," category"]})]}),e.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Activity will appear here as users interact with media"})]}):e.jsx("div",{className:"max-h-96 overflow-y-auto",children:m.map(t=>e.jsx(g,{activity:t},t.id))}),r.length>s&&e.jsx("div",{className:"p-4 border-t border-gray-100",children:e.jsx(v,{variant:"outline",className:"w-full",children:"View All Activities"})})]})]})},ne=()=>{const d=[{id:"upload",title:"Upload Media",description:"Add new media to your library",icon:$,action:()=>{b.success("Opening upload interface...")},variant:"default"},{id:"scan",title:"Scan Library",description:"Update media library with new files",icon:w,action:()=>{b.promise(P.analyzeDirectory("/"),{loading:"Scanning library...",success:"Library scan started",error:"Failed to start scan"})},variant:"outline"},{id:"search",title:"Search",description:"Find specific media quickly",icon:Q,action:()=>{b.success("Opening search interface...")},variant:"outline"},{id:"settings",title:"Settings",description:"Configure system preferences",icon:U,action:()=>{b.success("Opening settings...")},variant:"outline"}];return e.jsxs(h,{children:[e.jsx(u,{children:e.jsx(p,{children:"Quick Actions"})}),e.jsx(j,{children:e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:d.map(i=>{const l=i.icon;return e.jsxs(v,{variant:i.variant,onClick:i.action,className:"h-auto p-4 flex flex-col items-center space-y-2",children:[e.jsx(l,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm font-medium",children:i.title})]},i.id)})})})]})},re=()=>{const[s,a]=N.useState({cpu:45,memory:62,disk:78,network:!0,uptime:"5d 12h 34m"});return e.jsxs(h,{children:[e.jsx(u,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"System Status"]})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"CPU Usage"}),e.jsxs("span",{children:[s.cpu,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${s.cpu>80?"bg-red-500":s.cpu>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${s.cpu}%`}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Memory Usage"}),e.jsxs("span",{children:[s.memory,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${s.memory>80?"bg-red-500":s.memory>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${s.memory}%`}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Disk Usage"}),e.jsxs("span",{children:[s.disk,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${s.disk>80?"bg-red-500":s.disk>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${s.disk}%`}})})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t",children:[e.jsx("span",{children:"Network"}),e.jsx("span",{className:s.network?"text-green-600":"text-red-600",children:s.network?"Online":"Offline"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Uptime"}),e.jsx("span",{children:s.uptime})]})]})})]})},pe=()=>{const{user:s}=S(),{data:a,isLoading:r,error:c}=z(["media-stats"],()=>P.getMediaStats(),{refetchInterval:3e4,staleTime:1e4}),d={active_users:3,total_users:12,sessions_today:24,avg_session_duration:45};return N.useEffect(()=>{c&&b.error("Failed to load media statistics")},[c]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(f.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",(s==null?void 0:s.username)||"User","!"]}),e.jsx("p",{className:"text-gray-600",children:"Here's what's happening with your media library today."})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(v,{variant:"outline",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Last updated: ",new Date().toLocaleTimeString()]})})]}),e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(se,{mediaStats:a,userStats:d,loading:r})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(f.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:e.jsx(ae,{data:a==null?void 0:a.by_type,loading:r})}),e.jsx(f.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:e.jsx(re,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"lg:col-span-2",children:e.jsx(le,{limit:8})}),e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(ne,{})})]})]})};export{pe as Dashboard};
//# sourceMappingURL=Dashboard-CW97Gj2-.js.map
