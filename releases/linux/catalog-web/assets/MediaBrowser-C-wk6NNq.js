import{j as e,B as x,d as ne,a as R,z as Y}from"./index-BzqIBI_1.js";import{r as i}from"./router-CYAiCCsK.js";import{M as de}from"./MediaGrid-BESADauV.js";import{I as S}from"./Input-DQaGiHGP.js";import{C as w,a as Z,b as ee,d as k}from"./Card-pVNkGvZm.js";import{r as ce,X as U,S as se,s as I,_ as L,t as oe,u as xe,v as me,q as he,o as ge,h as ue,C as pe,I as V,p as O,w as je,x as fe,y as ye,z as ve,B as Ne,G as be,J as we,R as ke,A as H,m as W,K as J,N as X}from"./ui-DhyrEzjX.js";import{M as Ce}from"./MediaPlayer-DrQ3sVTP.js";import{m as E}from"./mediaApi-7GevB2yo.js";import{P as _e}from"./Progress-DQYu3Ol9.js";import"./charts-BaIhTcLh.js";import"./utils-B26ZFImD.js";import"./FavoriteToggle-C1Ak6xgo.js";const Fe=["movie","tv_show","music","game","software","documentary","concert","training","audiobook","ebook","podcast","youtube_video","adult_content","anime","sports","news"],Se=["cam","ts","dvdrip","brrip","720p","1080p","4k","hdr","dolby_vision"],Me=({filters:s,onFiltersChange:g,onReset:C,className:y=""})=>{const o=(a,p)=>{g({...s,[a]:p})},r=a=>{const p={...s};delete p[a],g(p)},u=Object.keys(s).some(a=>a!=="limit"&&a!=="offset"&&s[a]!==void 0);return e.jsxs(w,{className:y,children:[e.jsx(Z,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ee,{className:"flex items-center text-lg",children:[e.jsx(ce,{className:"h-5 w-5 mr-2"}),"Filters"]}),u&&e.jsxs(x,{variant:"ghost",size:"sm",onClick:C,className:"text-gray-500 hover:text-gray-700",children:[e.jsx(U,{className:"h-4 w-4 mr-1"}),"Clear all"]})]})}),e.jsxs(k,{className:"space-y-6",children:[e.jsx("div",{children:e.jsx(S,{label:"Search",type:"text",placeholder:"Search media titles...",value:s.query||"",onChange:a=>o("query",a.target.value||void 0),icon:e.jsx(se,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block",children:"Media Type"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Fe.map(a=>e.jsxs(x,{variant:s.media_type===a?"default":"outline",size:"sm",onClick:()=>s.media_type===a?r("media_type"):o("media_type",a),className:"text-xs",children:[a.replace("_"," "),s.media_type===a&&e.jsx(U,{className:"h-3 w-3 ml-1"})]},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block",children:"Quality"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Se.map(a=>e.jsxs(x,{variant:s.quality===a?"default":"outline",size:"sm",onClick:()=>s.quality===a?r("quality"):o("quality",a),className:"text-xs",children:[a.toUpperCase(),s.quality===a&&e.jsx(U,{className:"h-3 w-3 ml-1"})]},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block",children:"Year Range"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(S,{type:"number",placeholder:"From",value:s.year_min||"",onChange:a=>o("year_min",a.target.value?Number(a.target.value):void 0),min:"1900",max:new Date().getFullYear()}),e.jsx(S,{type:"number",placeholder:"To",value:s.year_max||"",onChange:a=>o("year_max",a.target.value?Number(a.target.value):void 0),min:"1900",max:new Date().getFullYear()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block",children:"Minimum Rating"}),e.jsx(S,{type:"number",placeholder:"0.0",value:s.rating_min||"",onChange:a=>o("rating_min",a.target.value?Number(a.target.value):void 0),min:"0",max:"10",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block",children:"Sort By"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-800 dark:text-white",value:s.sort_by||"updated_at",onChange:a=>o("sort_by",a.target.value),children:[e.jsx("option",{value:"updated_at",children:"Last Updated"}),e.jsx("option",{value:"created_at",children:"Date Added"}),e.jsx("option",{value:"title",children:"Title"}),e.jsx("option",{value:"year",children:"Year"}),e.jsx("option",{value:"rating",children:"Rating"}),e.jsx("option",{value:"file_size",children:"File Size"})]}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-800 dark:text-white",value:s.sort_order||"desc",onChange:a=>o("sort_order",a.target.value),children:[e.jsx("option",{value:"desc",children:"Descending"}),e.jsx("option",{value:"asc",children:"Ascending"})]})]})]})]})]})},ze=({media:s,isOpen:g,onClose:C,onDownload:y,onPlay:o})=>{var f;if(!s)return null;const r=(f=s.external_metadata)==null?void 0:f[0],u=(r==null?void 0:r.poster_url)||s.cover_image,a=r==null?void 0:r.backdrop_url,p=l=>{if(!l)return"Unknown";const j=["Bytes","KB","MB","GB","TB"],v=Math.floor(Math.log(l)/Math.log(1024));return`${(l/Math.pow(1024,v)).toFixed(2)} ${j[v]}`},N=l=>{if(!l)return"Unknown";const j=Math.floor(l/3600),v=Math.floor(l%3600/60);return j>0?`${j}h ${v}m`:`${v}m`};return e.jsx(I,{appear:!0,show:g,as:i.Fragment,children:e.jsxs(L,{as:"div",className:"relative z-50",onClose:C,children:[e.jsx(I.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(I.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(L.Panel,{className:"w-full max-w-4xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 text-left align-middle shadow-xl transition-all",children:[a&&e.jsxs("div",{className:"relative h-64 overflow-hidden",children:[e.jsx("img",{src:a,alt:s.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white dark:from-gray-800 to-transparent"})]}),e.jsx("button",{onClick:C,className:"absolute top-4 right-4 p-2 rounded-full bg-gray-900 bg-opacity-50 text-white hover:bg-opacity-75 transition-all z-10",children:e.jsx(U,{className:"h-5 w-5"})}),e.jsxs("div",{className:"p-8 -mt-20 relative",children:[e.jsxs("div",{className:"flex gap-8",children:[u&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:u,alt:s.title,className:"w-48 h-72 object-cover rounded-lg shadow-2xl"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(L.Title,{as:"h2",className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:(r==null?void 0:r.title)||s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-4",children:[s.year&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:s.year})]}),s.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xe,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:s.rating.toFixed(1)})]}),s.media_type&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{className:"capitalize",children:s.media_type.replace("_"," ")})]}),s.quality&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded text-xs font-semibold uppercase",children:s.quality})]}),(r==null?void 0:r.genres)&&r.genres.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:r.genres.map((l,j)=>e.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:l},j))}),((r==null?void 0:r.description)||s.description)&&e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 line-clamp-4",children:(r==null?void 0:r.description)||s.description}),e.jsxs("div",{className:"flex gap-3 mb-6",children:[o&&e.jsxs(x,{onClick:()=>o(s),className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Play"]}),y&&e.jsxs(x,{variant:"outline",onClick:()=>y(s),className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"Download"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.file_size&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ue,{className:"h-4 w-4 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"File Size"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p(s.file_size)})]})]}),s.duration&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(pe,{className:"h-4 w-4 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Duration"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N(s.duration)})]})]}),s.storage_root_name&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(V,{className:"h-4 w-4 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Storage"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.storage_root_name})]})]}),s.storage_root_protocol&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(V,{className:"h-4 w-4 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Protocol"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white uppercase",children:s.storage_root_protocol})]})]})]})]})]}),(r==null?void 0:r.cast)&&r.cast.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Cast"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:r.cast.slice(0,10).map((l,j)=>e.jsx("span",{className:"px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm",children:l},j))})]}),s.versions&&s.versions.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Available Versions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.versions.map(l=>e.jsx(w,{children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[l.quality," - ",l.resolution]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[l.codec," • ",p(l.file_size)]})]}),l.language&&e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded",children:l.language})]})})},l.id))})]})]})]})})})})]})})},De=({onUpload:s,onRemove:g,onRetry:C,maxFileSize:y=100*1024*1024,acceptedTypes:o=["video/*","audio/*","image/*"],maxConcurrentUploads:r=3})=>{const[u,a]=i.useState([]),[p,N]=i.useState(!1),f=i.useCallback(t=>{const c=Array.from(t).map(n=>({id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,file:n,progress:0,status:"pending"}));a(n=>[...n,...c]),setTimeout(()=>l(c),100)},[]),l=i.useCallback(async t=>{for(const c of t)try{a(n=>n.map(d=>d.id===c.id?{...d,status:"uploading"}:d));for(let n=0;n<=100;n+=10)await new Promise(d=>setTimeout(d,200)),a(d=>d.map(m=>m.id===c.id?{...m,progress:n}:m));a(n=>n.map(d=>d.id===c.id?{...d,status:"success"}:d)),s==null||s([c.file])}catch(n){a(d=>d.map(m=>m.id===c.id?{...m,status:"error",error:n instanceof Error?n.message:"Upload failed"}:m))}},[s]),j=i.useCallback(t=>{t.preventDefault(),N(!1);const n=Array.from(t.dataTransfer.files).filter(d=>!(d.size>y||o.length>0&&!o.some(m=>m.endsWith("/*")?d.type.startsWith(m.slice(0,-2)):d.type===m)));f(n)},[f,y,o]),v=i.useCallback(t=>{t.preventDefault(),N(!0)},[]),q=i.useCallback(t=>{t.preventDefault(),N(!1)},[]),M=i.useCallback(t=>{t.target.files&&f(t.target.files)},[f]),$=i.useCallback(t=>{a(c=>c.filter(n=>n.id!==t)),g==null||g(t)},[g]),z=i.useCallback(t=>{const c=u.find(n=>n.id===t);c&&l([{...c,status:"pending",progress:0,error:void 0}])},[u,l]),D=i.useCallback(()=>{a(t=>t.filter(c=>c.status!=="success"))},[]),P=t=>{if(t===0)return"0 Bytes";const c=1024,n=["Bytes","KB","MB","GB"],d=Math.floor(Math.log(t)/Math.log(c));return parseFloat((t/Math.pow(c,d)).toFixed(2))+" "+n[d]},B=t=>{switch(t){case"success":return e.jsx(ve,{className:"w-4 h-4 text-green-500"});case"error":return e.jsx(ye,{className:"w-4 h-4 text-red-500"});case"uploading":return e.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent animate-spin"});default:return e.jsx(fe,{className:"w-4 h-4 text-gray-500"})}};return e.jsxs(w,{className:"w-full max-w-4xl mx-auto",children:[e.jsx(Z,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),"Upload Manager"]}),u.some(t=>t.status==="success")&&e.jsx(x,{variant:"outline",size:"sm",onClick:D,children:"Clear Completed"})]})}),e.jsxs(k,{children:[e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${p?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:j,onDragOver:v,onDragLeave:q,children:[e.jsx(O,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium text-gray-700 mb-2",children:"Drop files here or click to browse"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Max file size: ",P(y),o.length>0&&e.jsxs(e.Fragment,{children:[" • Accepted types: ",o.join(", ")]})]}),e.jsx("input",{type:"file",multiple:!0,accept:o.join(","),onChange:M,className:"hidden",id:"file-input"}),e.jsx(x,{children:e.jsx("label",{htmlFor:"file-input",className:"cursor-pointer",children:"Select Files"})})]}),u.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"text-lg font-medium mb-4",children:["Upload Queue (",u.length," items)"]}),e.jsx("div",{className:"space-y-3",children:u.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[B(t.status),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.file.name}),e.jsx("p",{className:"text-xs text-gray-500",children:P(t.file.size)}),t.status==="uploading"&&e.jsx(_e,{value:t.progress,className:"mt-2"}),t.status==="error"&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t.error})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.status==="error"&&e.jsx(x,{variant:"outline",size:"sm",onClick:()=>z(t.id),children:"Retry"}),e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>$(t.id),children:e.jsx(je,{className:"w-4 h-4"})})]})]},t.id))})]})]})]})},Ke=()=>{const[s,g]=i.useState({limit:24,offset:0,sort_by:"updated_at",sort_order:"desc"}),[C,y]=i.useState(0),[o,r]=i.useState(!1),[u,a]=i.useState("grid"),[p,N]=i.useState(""),[f,l]=i.useState(null),[j,v]=i.useState(!1),[q,M]=i.useState(!1),[$,z]=i.useState(!1),[D,P]=i.useState(!1),B=i.useMemo(()=>ne(h=>{g(b=>({...b,query:h||void 0,offset:0}))},300),[]);i.useEffect(()=>{B(p)},[p,B]);const{data:t,isLoading:c,isError:n,refetch:d}=R({queryKey:["media-search",s,C],queryFn:()=>E.searchMedia(s),staleTime:1e3*60*5}),{data:m}=R({queryKey:["media-stats"],queryFn:E.getMediaStats,staleTime:1e3*60*15}),ae=h=>{g({...h,offset:0})},te=()=>{g({limit:24,offset:0,sort_by:"updated_at",sort_order:"desc"}),N("")},re=h=>{l(h),v(!0)},Q=h=>{l(h),M(!0)},K=async h=>{z(!0);try{await E.downloadMedia(h),Y.success(`Successfully downloaded ${h.title}`)}catch(b){console.error("Download failed:",b),Y.error(`Failed to download ${h.title}: ${b instanceof Error?b.message:"Unknown error"}`)}finally{z(!1)}},le=()=>{v(!1),l(null)},G=()=>{M(!1),l(null)},T=h=>{const b=Math.floor((s.offset||0)/(s.limit||24)),ie=h==="next"?(b+1)*(s.limit||24):Math.max(0,(b-1)*(s.limit||24));g(A=>({...A,offset:ie})),y(A=>A+1)},_=Math.floor((s.offset||0)/(s.limit||24))+1,F=t?Math.ceil(t.total/(s.limit||24)):0;return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Media Browser"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Explore and discover your media collection"})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(w,{children:e.jsxs(k,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:m.total_items.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Items"})]})}),e.jsx(w,{children:e.jsxs(k,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Object.keys(m.by_type).length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Media Types"})]})}),e.jsx(w,{children:e.jsxs(k,{className:"p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[(m.total_size/1024**3).toFixed(1)," GB"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Size"})]})}),e.jsx(w,{children:e.jsxs(k,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:m.recent_additions}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Recent Additions"})]})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 mb-8",children:[e.jsx("div",{className:"flex-1",children:e.jsx(S,{type:"text",placeholder:"Search your media collection...",value:p,onChange:h=>N(h.target.value),icon:e.jsx(se,{className:"h-4 w-4"}),className:"w-full"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(x,{variant:"outline",onClick:()=>r(!o),className:"flex items-center","data-testid":"filters-button",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Filters"]}),e.jsxs("div",{className:"flex border border-gray-300 rounded-lg dark:border-gray-600",children:[e.jsx(x,{variant:u==="grid"?"default":"ghost",size:"sm",onClick:()=>a("grid"),className:"rounded-r-none","data-testid":"grid-view-button",children:e.jsx(be,{className:"h-4 w-4"})}),e.jsx(x,{variant:u==="list"?"default":"ghost",size:"sm",onClick:()=>a("list"),className:"rounded-l-none","data-testid":"list-view-button",children:e.jsx(we,{className:"h-4 w-4"})})]}),e.jsx(x,{variant:"outline",onClick:()=>P(!D),"data-testid":"upload-button",children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",onClick:()=>d(),disabled:c,"data-testid":"refresh-button",children:e.jsx(ke,{className:`h-4 w-4 ${c?"animate-spin":""}`})})]})]}),e.jsx(H,{children:D&&e.jsx(W.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden mb-8",children:e.jsx(De,{onUpload:async()=>{d()}})})}),e.jsxs("div",{className:"flex gap-8",children:[e.jsx(H,{children:o&&e.jsx(W.aside,{initial:{width:0,opacity:0},animate:{width:320,opacity:1},exit:{width:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:e.jsx(Me,{filters:s,onFiltersChange:ae,onReset:te,className:"sticky top-24"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[t&&e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",t.items.length," of ",t.total.toLocaleString()," results",s.query&&e.jsxs("span",{children:[' for "',s.query,'"']})]}),F>1&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>T("prev"),disabled:_===1,"data-testid":"prev-page-button",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",_," of ",F]}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>T("next"),disabled:_===F,"data-testid":"next-page-button",children:e.jsx(X,{className:"h-4 w-4"})})]})]}),n&&e.jsx(w,{className:"text-center py-12",children:e.jsxs(k,{children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Failed to load media"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"There was an error loading your media collection."}),e.jsx(x,{variant:"outline",onClick:()=>d(),className:"mt-4","data-testid":"retry-button",children:"Try again"})]})}),!n&&e.jsx(de,{media:(t==null?void 0:t.items)||[],loading:c,onMediaView:re,onMediaPlay:Q,onMediaDownload:K}),t&&F>1&&e.jsx("div",{className:"flex justify-center mt-12",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(x,{variant:"outline",onClick:()=>T("prev"),disabled:_===1,"data-testid":"prev-page-button-main",children:[e.jsx(J,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsxs("span",{className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400",children:["Page ",_," of ",F]}),e.jsxs(x,{variant:"outline",onClick:()=>T("next"),disabled:_===F,"data-testid":"next-page-button-main",children:["Next",e.jsx(X,{className:"h-4 w-4 ml-1"})]})]})})]})]}),e.jsx(ze,{media:f,isOpen:j,onClose:le,onDownload:K,onPlay:Q}),f&&q&&e.jsx("div",{className:"fixed inset-0 bg-black z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-6xl",children:[e.jsx(x,{variant:"ghost",size:"sm",onClick:G,className:"absolute -top-12 right-0 text-white hover:text-gray-300 z-10",children:"Close"}),e.jsx(Ce,{media:f,onEnded:G})]})})]})};export{Ke as MediaBrowser};
//# sourceMappingURL=MediaBrowser-C-wk6NNq.js.map
