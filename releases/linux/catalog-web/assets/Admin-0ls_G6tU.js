import{j as e,B as c,a as y,z as o}from"./index-BzqIBI_1.js";import{r as $}from"./router-CYAiCCsK.js";import{C as n,d,a as p,b as g}from"./Card-pVNkGvZm.js";import{B as k}from"./Badge-CeVT3Lft.js";import{P as b}from"./Progress-DQYu3Ol9.js";import{R as T,n as A,i as q,h as R,D,c as E,o as z,ai as Z,p as C}from"./ui-DhyrEzjX.js";import"./charts-BaIhTcLh.js";import"./utils-B26ZFImD.js";const B=({systemInfo:a,users:w,storageInfo:U,backups:F,onCreateBackup:t,onRestoreBackup:f,onScanStorage:j,onUpdateUser:M})=>{const[h,S]=$.useState("overview"),L=s=>{const l=Math.floor(s/86400),u=Math.floor(s%86400/3600),v=Math.floor(s%3600/60);return`${l}d ${u}h ${v}m`},m=s=>{if(s===0)return"0 Bytes";const l=1024,u=["Bytes","KB","MB","GB","TB"],v=Math.floor(Math.log(s)/Math.log(l));return parseFloat((s/Math.pow(l,v)).toFixed(2))+" "+u[v]},i=s=>{const l={admin:"destructive",user:"default",viewer:"secondary"};return e.jsx(k,{variant:l[s],children:s.toUpperCase()})},r=s=>{const l={active:"default",inactive:"secondary",suspended:"destructive"};return e.jsx(k,{variant:l[s],children:s.toUpperCase()})},N=s=>{const l={completed:"default","in-progress":"default",failed:"destructive"};return e.jsx(k,{variant:l[s],children:s.replace("-"," ").toUpperCase()})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Admin Panel"}),e.jsxs(c,{variant:"outline",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",label:"Overview",icon:A},{id:"users",label:"Users",icon:q},{id:"storage",label:"Storage",icon:R},{id:"backups",label:"Backups",icon:D}].map(({id:s,label:l,icon:u})=>e.jsxs("button",{onClick:()=>S(s),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors ${h===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(u,{className:"w-4 h-4"}),l]},s))})}),h==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Version"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.version})]}),e.jsx(E,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Uptime"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L(a.uptime)})]}),e.jsx(A,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Connections"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.activeConnections})]}),e.jsx(q,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalRequests.toLocaleString()})]}),e.jsx(A,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n,{children:[e.jsx(p,{children:e.jsx(g,{children:"System Resources"})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"CPU Usage"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[a.cpuUsage,"%"]})]}),e.jsx(b,{value:a.cpuUsage})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Memory Usage"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[a.memoryUsage,"%"]})]}),e.jsx(b,{value:a.memoryUsage})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Disk Usage"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[m(a.diskUsage.used)," / ",m(a.diskUsage.total)]})]}),e.jsx(b,{value:a.diskUsage.used/a.diskUsage.total*100})]})]})]}),e.jsxs(n,{children:[e.jsx(p,{children:e.jsx(g,{children:"Quick Actions"})}),e.jsxs(d,{className:"space-y-3",children:[e.jsxs(c,{onClick:()=>t==null?void 0:t("full"),className:"w-full justify-start",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Create Full Backup"]}),e.jsxs(c,{onClick:()=>t==null?void 0:t("incremental"),variant:"outline",className:"w-full justify-start",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Create Incremental Backup"]}),e.jsxs(c,{variant:"outline",className:"w-full justify-start",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Scan All Storage"]}),e.jsxs(c,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Security Audit"]})]})]})]})]}),h==="users"&&e.jsxs(n,{children:[e.jsx(p,{children:e.jsx(g,{children:"User Management"})}),e.jsx(d,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Username"}),e.jsx("th",{className:"text-left p-2",children:"Email"}),e.jsx("th",{className:"text-left p-2",children:"Role"}),e.jsx("th",{className:"text-left p-2",children:"Status"}),e.jsx("th",{className:"text-left p-2",children:"Last Login"}),e.jsx("th",{className:"text-left p-2",children:"Actions"})]})}),e.jsx("tbody",{children:w.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-medium",children:s.username}),e.jsx("td",{className:"p-2",children:s.email}),e.jsx("td",{className:"p-2",children:i(s.role)}),e.jsx("td",{className:"p-2",children:r(s.status)}),e.jsx("td",{className:"p-2",children:s.lastLogin?new Date(s.lastLogin).toLocaleDateString():"Never"}),e.jsx("td",{className:"p-2",children:e.jsx(c,{variant:"outline",size:"sm",children:"Edit"})})]},s.id))})]})})})]}),h==="storage"&&e.jsx("div",{className:"space-y-4",children:U.map((s,l)=>e.jsxs(n,{children:[e.jsx(p,{children:e.jsxs(g,{className:"flex items-center justify-between",children:[e.jsx("span",{children:s.path}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>j==null?void 0:j(s.path),children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Scan"]})]})}),e.jsxs(d,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Space"}),e.jsx("p",{className:"text-lg font-semibold",children:m(s.totalSpace)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Used Space"}),e.jsx("p",{className:"text-lg font-semibold",children:m(s.usedSpace)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Available"}),e.jsx("p",{className:"text-lg font-semibold",children:m(s.availableSpace)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Media Count"}),e.jsx("p",{className:"text-lg font-semibold",children:s.mediaCount.toLocaleString()})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(b,{value:s.usedSpace/s.totalSpace*100,className:"mb-2"}),e.jsx("p",{className:"text-xs text-gray-600",children:s.lastScan?`Last scanned: ${new Date(s.lastScan).toLocaleString()}`:"Not scanned yet"})]})]})]},l))}),h==="backups"&&e.jsxs(n,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(g,{children:"Backup Management"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{onClick:()=>t==null?void 0:t("full"),children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Full Backup"]}),e.jsxs(c,{variant:"outline",onClick:()=>t==null?void 0:t("incremental"),children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Incremental"]})]})]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:F.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:s.filename}),e.jsxs("p",{className:"text-sm text-gray-600",children:[m(s.size)," â€¢ Created ",new Date(s.createdAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[N(s.status),e.jsxs(c,{variant:"outline",size:"sm",disabled:s.status!=="completed",onClick:()=>f==null?void 0:f(s.id),children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Restore"]})]})]},s.id))})})]})]})},x={async getSystemInfo(){return{version:"1.0.0",uptime:86400,cpuUsage:45,memoryUsage:62,diskUsage:{total:1073741824e3,used:536870912e3,free:536870912e3},activeConnections:12,totalRequests:15420}},async getUsers(){return[{id:"1",username:"admin",email:"admin@catalogizer.local",role:"admin",status:"active",lastLogin:"2023-12-09T10:30:00Z",createdAt:"2023-01-01T00:00:00Z"},{id:"2",username:"user1",email:"user1@example.com",role:"user",status:"active",lastLogin:"2023-12-08T15:45:00Z",createdAt:"2023-02-15T10:30:00Z"}]},async getStorageInfo(){return[{path:"/media/movies",totalSpace:1073741824e3,usedSpace:751619276800,availableSpace:322122547200,mediaCount:1250,lastScan:"2023-12-09T09:00:00Z"},{path:"/media/tv",totalSpace:536870912e3,usedSpace:268435456e3,availableSpace:268435456e3,mediaCount:850,lastScan:"2023-12-09T08:30:00Z"}]},async getBackups(){return[{id:"1",filename:"catalogizer-backup-20231209-full.tar.gz",size:1073741824,createdAt:"2023-12-09T05:00:00Z",type:"full",status:"completed"},{id:"2",filename:"catalogizer-backup-20231208-incremental.tar.gz",size:268435456,createdAt:"2023-12-08T05:00:00Z",type:"incremental",status:"completed"}]},async createBackup(a){},async restoreBackup(a){},async scanStorage(a){},async updateUser(a,w){}},J=()=>{const{data:a,isLoading:w}=y({queryKey:["admin-system-info"],queryFn:()=>x.getSystemInfo(),staleTime:12e4,refetchInterval:3e4}),{data:U,isLoading:F}=y({queryKey:["admin-users"],queryFn:()=>x.getUsers(),staleTime:1e3*60*5}),{data:t,isLoading:f}=y({queryKey:["admin-storage"],queryFn:()=>x.getStorageInfo(),staleTime:1e3*60*5}),{data:j,isLoading:M}=y({queryKey:["admin-backups"],queryFn:()=>x.getBackups(),staleTime:1e3*60*2}),h=async i=>{try{await x.createBackup(i),o.success(`${i==="full"?"Full":"Incremental"} backup started successfully`)}catch(r){o.error(`Failed to create backup: ${r instanceof Error?r.message:"Unknown error"}`)}},S=async i=>{try{await x.restoreBackup(i),o.success("Backup restore initiated successfully")}catch(r){o.error(`Failed to restore backup: ${r instanceof Error?r.message:"Unknown error"}`)}},L=async i=>{try{await x.scanStorage(i),o.success(`Storage scan initiated for ${i}`)}catch(r){o.error(`Failed to scan storage: ${r instanceof Error?r.message:"Unknown error"}`)}},m=async(i,r)=>{try{await x.updateUser(i,r),o.success("User updated successfully")}catch(N){o.error(`Failed to update user: ${N instanceof Error?N.message:"Unknown error"}`)}};return e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx(B,{systemInfo:a||{version:"1.0.0",uptime:86400,cpuUsage:45,memoryUsage:62,diskUsage:{total:1073741824e3,used:536870912e3,free:536870912e3},activeConnections:12,totalRequests:15420},users:U||[],storageInfo:t||[],backups:j||[],onCreateBackup:h,onRestoreBackup:S,onScanStorage:L,onUpdateUser:m})})};export{J as Admin};
//# sourceMappingURL=Admin-0ls_G6tU.js.map
