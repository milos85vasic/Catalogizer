import{j as e,B as r,n as o}from"./index-BzqIBI_1.js";import{r as i}from"./router-CYAiCCsK.js";import{I as z}from"./Input-DQaGiHGP.js";import{S as c}from"./Tabs-VczWTLgE.js";import{S as L}from"./Collections-CnjrFI1E.js";import{B as H}from"./Badge-CeVT3Lft.js";import{a6 as g,S as f,aZ as $,c as M,a_ as K,a$ as G,a8 as U,aK as V,a7 as W,F as Q,H as Y,f as Z}from"./ui-DhyrEzjX.js";import"./charts-BaIhTcLh.js";import"./utils-B26ZFImD.js";import"./Card-pVNkGvZm.js";import"./AIMetadata-CNrDn82p.js";const S=[{value:"title",label:"Title",type:"text"},{value:"description",label:"Description",type:"text"},{value:"file_type",label:"File Type",type:"select",options:["video","audio","image","document"]},{value:"size",label:"File Size",type:"number"},{value:"duration",label:"Duration",type:"number"},{value:"created_at",label:"Created Date",type:"date"},{value:"updated_at",label:"Updated Date",type:"date"},{value:"rating",label:"Rating",type:"number"},{value:"tags",label:"Tags",type:"text"},{value:"year",label:"Year",type:"number"},{value:"genre",label:"Genre",type:"text"},{value:"resolution",label:"Resolution",type:"select",options:["720p","1080p","4K","8K"]},{value:"codec",label:"Codec",type:"text"},{value:"language",label:"Language",type:"text"},{value:"watch_count",label:"Watch Count",type:"number"},{value:"download_count",label:"Download Count",type:"number"},{value:"is_favorite",label:"Favorite",type:"boolean"},{value:"is_archived",label:"Archived",type:"boolean"}],w={text:[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"contains",label:"Contains"},{value:"not_contains",label:"Does Not Contain"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"},{value:"in",label:"In",requiresArray:!0},{value:"not_in",label:"Not In",requiresArray:!0}],number:[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"between",label:"Between",requiresArray:!0},{value:"not_between",label:"Not Between",requiresArray:!0}],date:[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between",requiresArray:!0},{value:"not_between",label:"Not Between",requiresArray:!0}],boolean:[{value:"equals",label:"Is"},{value:"not_equals",label:"Is Not"}],select:[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"in",label:"In",requiresArray:!0},{value:"not_in",label:"Not In",requiresArray:!0}]},J=[{id:"1",name:"HD Movies",description:"Find high-definition movies",category:"media",icon:e.jsx(V,{className:"w-4 h-4"}),rules:[{field:"file_type",operator:"equals",value:"video"},{field:"resolution",operator:"in",value:["1080p","4K"]}],tags:["video","quality"]},{id:"2",name:"Recent Photos",description:"Photos from the last 30 days",category:"media",icon:e.jsx(W,{className:"w-4 h-4"}),rules:[{field:"file_type",operator:"equals",value:"image"},{field:"created_at",operator:"greater_than",value:new Date(Date.now()-720*60*60*1e3)}],tags:["images","recent"]},{id:"3",name:"Large Files",description:"Files larger than 1GB",category:"media",icon:e.jsx(Q,{className:"w-4 h-4"}),rules:[{field:"size",operator:"greater_than",value:1073741824}],tags:["size","storage"]},{id:"4",name:"Favorites",description:"All marked as favorite",category:"media",icon:e.jsx(Y,{className:"w-4 h-4"}),rules:[{field:"is_favorite",operator:"equals",value:!0}],tags:["favorites"]},{id:"5",name:"Unwatched Videos",description:"Videos you haven't watched yet",category:"media",icon:e.jsx(Z,{className:"w-4 h-4"}),rules:[{field:"file_type",operator:"in",value:["video","audio"]},{field:"watch_count",operator:"equals",value:0}],tags:["video","watchlist"]}],me=()=>{const[l,n]=i.useState([]),[d,m]=i.useState({sortBy:"relevance",sortOrder:"desc",itemsPerPage:24,caseSensitive:!1,includeMetadata:!0,viewMode:"grid"}),[x,_]=i.useState([]),[X,C]=i.useState(!1),[q,A]=i.useState(""),[ee,p]=i.useState(!1),[h,b]=i.useState("builder"),[y,R]=i.useState(!1),v=()=>Math.random().toString(36).substr(2,9),j=a=>{const t=S.find(s=>s.value===a);return(t==null?void 0:t.type)||"text"},k=a=>{const t=j(a);return w[t]||[]},N=()=>{const a={id:v(),field:"title",operator:"contains",value:"",enabled:!0,condition:l.length>0?"and":void 0};n([...l,a])},u=(a,t)=>{n(l.map(s=>s.id===a?{...s,...t}:s))},D=a=>{n(l.filter(t=>t.id!==a))},E=a=>{const t=l.find(s=>s.id===a);if(t){const s={...t,id:v(),condition:"and"};n([...l,s])}},B=async()=>{p(!0);try{const a={id:v(),name:q,description:`Custom search with ${l.length} rules`,rules:[...l],settings:{...d},created_at:new Date().toISOString(),updated_at:new Date().toISOString()};_([...x,a]),C(!1),A(""),o.success("Search saved successfully")}catch{o.error("Failed to save search")}finally{p(!1)}},F=a=>{const t=a.rules.map((s,O)=>({id:v(),field:s.field||"title",operator:s.operator||"contains",value:s.value||"",enabled:!0,condition:O>0?"and":void 0}));n(t),o.success(`Applied preset: ${a.name}`)},I=a=>{n([...a.rules]),m({...a.settings}),o.success(`Loaded search: ${a.name}`)},P=()=>{const a=l.filter(t=>t.enabled);if(a.length===0){o.error("Please enable at least one search rule");return}o.success(`Searching with ${a.length} rules...`)},T=()=>{n([]),o.success("Search rules cleared")};return e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Advanced Search"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Build complex search queries with multiple rules and conditions"}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsx("div",{className:"flex gap-4",children:["builder","presets","saved"].map(a=>e.jsx("button",{onClick:()=>b(a),className:`py-2 px-1 border-b-2 font-medium text-sm ${h===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})}),h==="builder"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Search Rules"}),e.jsxs(r,{onClick:N,size:"sm",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Add Rule"]})]}),l.length===0?e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx(f,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"No search rules defined"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Add rules to build your search query"}),e.jsxs(r,{onClick:N,children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Add First Rule"]})]}):e.jsx("div",{className:"space-y-3",children:l.map((a,t)=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"pt-2",children:[e.jsx(L,{checked:a.enabled,onCheckedChange:s=>u(a.id,{enabled:s})}),t>0&&e.jsx(c,{value:a.condition||"and",onChange:s=>u(a.id,{condition:s}),options:[{value:"and",label:"AND"},{value:"or",label:"OR"}]})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(c,{value:a.field,onChange:s=>u(a.id,{field:s,value:"",operator:w[j(s)][0].value}),options:S.map(s=>({value:s.value,label:s.label}))}),e.jsx(c,{value:a.operator,onChange:s=>u(a.id,{operator:s,value:""}),options:k(a.field)}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(z,{value:a.value,onChange:s=>u(a.id,{value:s.target.value}),placeholder:a.operator==="in"||a.operator==="not_in"?"comma,separated,values":"Enter value..."})})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>E(a.id),title:"Duplicate rule",children:e.jsx(g,{className:"w-3 h-3"})}),e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>D(a.id),className:"text-red-600 hover:text-red-700",title:"Remove rule",children:e.jsx($,{className:"w-3 h-3"})})]})]})},a.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Search Settings"}),e.jsxs(r,{variant:"ghost",size:"sm",onClick:()=>R(!y),children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),y?"Hide":"Show"," Advanced"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsx(c,{value:d.sortBy,onChange:a=>m({...d,sortBy:a}),options:[{value:"relevance",label:"Relevance"},{value:"title",label:"Title"},{value:"created_at",label:"Date Created"},{value:"rating",label:"Rating"}]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order"}),e.jsx(c,{value:d.sortOrder,onChange:a=>m({...d,sortOrder:a}),options:[{value:"asc",label:"Ascending"},{value:"desc",label:"Descending"}]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Items per page"}),e.jsx(c,{value:d.itemsPerPage.toString(),onChange:a=>m({...d,itemsPerPage:Number(a)}),options:[{value:"12",label:"12"},{value:"24",label:"24"},{value:"48",label:"48"},{value:"96",label:"96"}]})]})]})]})]}),h==="presets"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Search Presets"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Quick start with pre-configured search patterns"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:J.map(a=>e.jsx("div",{className:"border rounded-lg p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>F(a),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100",children:a.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-semibold text-gray-900 text-sm",children:a.name}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:a.category}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:a.description}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(H,{variant:"outline",children:[a.rules.length," rules"]})})]})]})},a.id))})]}),h==="saved"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Saved Searches"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Access your previously saved search configurations"}),x.length===0?e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx(K,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"No saved searches yet"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Save your search rules to reuse them later"}),e.jsx(r,{onClick:()=>b("builder"),children:"Create Search Rule"})]}):e.jsx("div",{className:"space-y-4",children:x.map(a=>e.jsx("div",{className:"border rounded-lg p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>I(a),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:a.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:[a.rules.length," rules"]}),e.jsxs("span",{children:["Created ",new Date(a.created_at).toLocaleDateString()]})]})]}),e.jsx(r,{variant:"outline",size:"sm",children:"Load"})]})},a.id))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[l.filter(a=>a.enabled).length," active rule",l.filter(a=>a.enabled).length!==1?"s":""]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l.length>0&&e.jsxs(r,{variant:"outline",onClick:T,children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Clear All"]}),e.jsxs(r,{onClick:B,disabled:l.length===0,children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Save Search"]}),e.jsxs(r,{onClick:P,disabled:l.filter(a=>a.enabled).length===0,children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Search"]})]})]})]})})};export{me as default};
//# sourceMappingURL=AdvancedSearch-DdOS6g_3.js.map
