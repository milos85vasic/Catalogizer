{"version":3,"file":"MediaBrowser-C-wk6NNq.js","sources":["../../src/types/media.ts","../../src/components/media/MediaFilters.tsx","../../src/components/media/MediaDetailModal.tsx","../../src/components/upload/UploadManager.tsx","../../src/pages/MediaBrowser.tsx"],"sourcesContent":["export interface MediaItem {\n  id: number\n  title: string\n  media_type: string\n  year?: number\n  description?: string\n  cover_image?: string\n  rating?: number\n  quality?: string\n  file_size?: number\n  duration?: number\n  directory_path: string\n  storage_root_name?: string\n  storage_root_protocol?: string\n  created_at: string\n  updated_at: string\n  external_metadata?: ExternalMetadata[]\n  versions?: MediaVersion[]\n}\n\nexport interface ExternalMetadata {\n  id: number\n  media_id: number\n  provider: string\n  external_id: string\n  title: string\n  description?: string\n  year?: number\n  rating?: number\n  poster_url?: string\n  backdrop_url?: string\n  genres?: string[]\n  cast?: string[]\n  crew?: string[]\n  metadata: Record<string, any>\n  last_updated: string\n}\n\nexport interface MediaVersion {\n  id: number\n  media_id: number\n  version: string\n  quality: string\n  file_path: string\n  file_size: number\n  codec?: string\n  resolution?: string\n  bitrate?: number\n  language?: string\n}\n\nexport interface QualityInfo {\n  overall_score: number\n  video_quality?: number\n  audio_quality?: number\n  resolution: string\n  bitrate?: number\n  codec: string\n  file_size: number\n}\n\nexport interface MediaSearchRequest {\n  query?: string\n  media_type?: string\n  year_min?: number\n  year_max?: number\n  rating_min?: number\n  quality?: string\n  sort_by?: string\n  sort_order?: 'asc' | 'desc'\n  limit?: number\n  offset?: number\n}\n\nexport interface MediaSearchResponse {\n  items: MediaItem[]\n  total: number\n  limit: number\n  offset: number\n}\n\nexport const MEDIA_TYPES = [\n  'movie',\n  'tv_show',\n  'music',\n  'game',\n  'software',\n  'documentary',\n  'concert',\n  'training',\n  'audiobook',\n  'ebook',\n  'podcast',\n  'youtube_video',\n  'adult_content',\n  'anime',\n  'sports',\n  'news',\n] as const\n\nexport type MediaType = typeof MEDIA_TYPES[number]\n\nexport const QUALITY_LEVELS = [\n  'cam',\n  'ts',\n  'dvdrip',\n  'brrip',\n  '720p',\n  '1080p',\n  '4k',\n  'hdr',\n  'dolby_vision',\n] as const\n\nexport type QualityLevel = typeof QUALITY_LEVELS[number]\n\nexport interface StorageRoot {\n  id: number\n  name: string\n  protocol: string\n  enabled: boolean\n  max_depth: number\n  enable_duplicate_detection: boolean\n  enable_metadata_extraction: boolean\n  created_at: string\n  updated_at: string\n  last_scan_at?: string\n}\n\nexport const SUPPORTED_PROTOCOLS = [\n  'smb',\n  'ftp',\n  'nfs',\n  'webdav',\n  'local',\n] as const\n\nexport type StorageProtocol = typeof SUPPORTED_PROTOCOLS[number]","import React from 'react'\nimport { Button } from '@/components/ui/Button'\nimport { Input } from '@/components/ui/Input'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/Card'\nimport type { MediaSearchRequest } from '@/types/media'\nimport { MEDIA_TYPES, QUALITY_LEVELS } from '@/types/media'\nimport { Filter, X, Search } from 'lucide-react'\n\ninterface MediaFiltersProps {\n  filters: MediaSearchRequest\n  onFiltersChange: (filters: MediaSearchRequest) => void\n  onReset: () => void\n  className?: string\n}\n\nexport const MediaFilters: React.FC<MediaFiltersProps> = ({\n  filters,\n  onFiltersChange,\n  onReset,\n  className = ''\n}) => {\n  const updateFilter = (key: keyof MediaSearchRequest, value: any) => {\n    onFiltersChange({\n      ...filters,\n      [key]: value,\n    })\n  }\n\n  const clearFilter = (key: keyof MediaSearchRequest) => {\n    const newFilters = { ...filters }\n    delete newFilters[key]\n    onFiltersChange(newFilters)\n  }\n\n  const hasActiveFilters = Object.keys(filters).some(\n    key => key !== 'limit' && key !== 'offset' && filters[key as keyof MediaSearchRequest] !== undefined\n  )\n\n  return (\n    <Card className={className}>\n      <CardHeader className=\"pb-4\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center text-lg\">\n            <Filter className=\"h-5 w-5 mr-2\" />\n            Filters\n          </CardTitle>\n          {hasActiveFilters && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={onReset}\n              className=\"text-gray-500 hover:text-gray-700\"\n            >\n              <X className=\"h-4 w-4 mr-1\" />\n              Clear all\n            </Button>\n          )}\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"space-y-6\">\n        {/* Search Query */}\n        <div>\n          <Input\n            label=\"Search\"\n            type=\"text\"\n            placeholder=\"Search media titles...\"\n            value={filters.query || ''}\n            onChange={(e) => updateFilter('query', e.target.value || undefined)}\n            icon={<Search className=\"h-4 w-4\" />}\n          />\n        </div>\n\n        {/* Media Type */}\n        <div>\n          <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block\">\n            Media Type\n          </label>\n          <div className=\"flex flex-wrap gap-2\">\n            {MEDIA_TYPES.map((type) => (\n              <Button\n                key={type}\n                variant={filters.media_type === type ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() =>\n                  filters.media_type === type\n                    ? clearFilter('media_type')\n                    : updateFilter('media_type', type)\n                }\n                className=\"text-xs\"\n              >\n                {type.replace('_', ' ')}\n                {filters.media_type === type && (\n                  <X className=\"h-3 w-3 ml-1\" />\n                )}\n              </Button>\n            ))}\n          </div>\n        </div>\n\n        {/* Quality */}\n        <div>\n          <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block\">\n            Quality\n          </label>\n          <div className=\"flex flex-wrap gap-2\">\n            {QUALITY_LEVELS.map((quality) => (\n              <Button\n                key={quality}\n                variant={filters.quality === quality ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() =>\n                  filters.quality === quality\n                    ? clearFilter('quality')\n                    : updateFilter('quality', quality)\n                }\n                className=\"text-xs\"\n              >\n                {quality.toUpperCase()}\n                {filters.quality === quality && (\n                  <X className=\"h-3 w-3 ml-1\" />\n                )}\n              </Button>\n            ))}\n          </div>\n        </div>\n\n        {/* Year Range */}\n        <div>\n          <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block\">\n            Year Range\n          </label>\n          <div className=\"grid grid-cols-2 gap-3\">\n            <Input\n              type=\"number\"\n              placeholder=\"From\"\n              value={filters.year_min || ''}\n              onChange={(e) =>\n                updateFilter('year_min', e.target.value ? Number(e.target.value) : undefined)\n              }\n              min=\"1900\"\n              max={new Date().getFullYear()}\n            />\n            <Input\n              type=\"number\"\n              placeholder=\"To\"\n              value={filters.year_max || ''}\n              onChange={(e) =>\n                updateFilter('year_max', e.target.value ? Number(e.target.value) : undefined)\n              }\n              min=\"1900\"\n              max={new Date().getFullYear()}\n            />\n          </div>\n        </div>\n\n        {/* Rating */}\n        <div>\n          <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block\">\n            Minimum Rating\n          </label>\n          <Input\n            type=\"number\"\n            placeholder=\"0.0\"\n            value={filters.rating_min || ''}\n            onChange={(e) =>\n              updateFilter('rating_min', e.target.value ? Number(e.target.value) : undefined)\n            }\n            min=\"0\"\n            max=\"10\"\n            step=\"0.1\"\n          />\n        </div>\n\n        {/* Sort Options */}\n        <div>\n          <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block\">\n            Sort By\n          </label>\n          <div className=\"grid grid-cols-2 gap-3\">\n            <select\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-800 dark:text-white\"\n              value={filters.sort_by || 'updated_at'}\n              onChange={(e) => updateFilter('sort_by', e.target.value)}\n            >\n              <option value=\"updated_at\">Last Updated</option>\n              <option value=\"created_at\">Date Added</option>\n              <option value=\"title\">Title</option>\n              <option value=\"year\">Year</option>\n              <option value=\"rating\">Rating</option>\n              <option value=\"file_size\">File Size</option>\n            </select>\n\n            <select\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-800 dark:text-white\"\n              value={filters.sort_order || 'desc'}\n              onChange={(e) => updateFilter('sort_order', e.target.value as 'asc' | 'desc')}\n            >\n              <option value=\"desc\">Descending</option>\n              <option value=\"asc\">Ascending</option>\n            </select>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  )\n}","import React, { Fragment } from 'react'\nimport { Dialog, Transition } from '@headlessui/react'\nimport { X, Download, Play, Star, Calendar, Film, HardDrive, Clock, Info } from 'lucide-react'\nimport { Button } from '@/components/ui/Button'\nimport { Card, CardContent } from '@/components/ui/Card'\nimport type { MediaItem } from '@/types/media'\n\ninterface MediaDetailModalProps {\n  media: MediaItem | null\n  isOpen: boolean\n  onClose: () => void\n  onDownload?: (media: MediaItem) => void\n  onPlay?: (media: MediaItem) => void\n}\n\nexport const MediaDetailModal: React.FC<MediaDetailModalProps> = ({\n  media,\n  isOpen,\n  onClose,\n  onDownload,\n  onPlay,\n}) => {\n  if (!media) return null\n\n  const externalMeta = media.external_metadata?.[0]\n  const posterUrl = externalMeta?.poster_url || media.cover_image\n  const backdropUrl = externalMeta?.backdrop_url\n\n  const formatFileSize = (bytes?: number) => {\n    if (!bytes) return 'Unknown'\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\n    const i = Math.floor(Math.log(bytes) / Math.log(1024))\n    return `${(bytes / Math.pow(1024, i)).toFixed(2)} ${sizes[i]}`\n  }\n\n  const formatDuration = (seconds?: number) => {\n    if (!seconds) return 'Unknown'\n    const hours = Math.floor(seconds / 3600)\n    const minutes = Math.floor((seconds % 3600) / 60)\n    if (hours > 0) {\n      return `${hours}h ${minutes}m`\n    }\n    return `${minutes}m`\n  }\n\n  return (\n    <Transition appear show={isOpen} as={Fragment}>\n      <Dialog as=\"div\" className=\"relative z-50\" onClose={onClose}>\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-300\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-100\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-100\"\n          leaveTo=\"opacity-0\"\n        >\n          <div className=\"fixed inset-0 bg-black bg-opacity-75\" />\n        </Transition.Child>\n\n        <div className=\"fixed inset-0 overflow-y-auto\">\n          <div className=\"flex min-h-full items-center justify-center p-4 text-center\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n            >\n              <Dialog.Panel className=\"w-full max-w-4xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 text-left align-middle shadow-xl transition-all\">\n                {/* Backdrop Image */}\n                {backdropUrl && (\n                  <div className=\"relative h-64 overflow-hidden\">\n                    <img\n                      src={backdropUrl}\n                      alt={media.title}\n                      className=\"w-full h-full object-cover\"\n                    />\n                    <div className=\"absolute inset-0 bg-gradient-to-t from-white dark:from-gray-800 to-transparent\" />\n                  </div>\n                )}\n\n                {/* Close Button */}\n                <button\n                  onClick={onClose}\n                  className=\"absolute top-4 right-4 p-2 rounded-full bg-gray-900 bg-opacity-50 text-white hover:bg-opacity-75 transition-all z-10\"\n                >\n                  <X className=\"h-5 w-5\" />\n                </button>\n\n                {/* Content */}\n                <div className=\"p-8 -mt-20 relative\">\n                  <div className=\"flex gap-8\">\n                    {/* Poster */}\n                    {posterUrl && (\n                      <div className=\"flex-shrink-0\">\n                        <img\n                          src={posterUrl}\n                          alt={media.title}\n                          className=\"w-48 h-72 object-cover rounded-lg shadow-2xl\"\n                        />\n                      </div>\n                    )}\n\n                    {/* Details */}\n                    <div className=\"flex-1 min-w-0\">\n                      <Dialog.Title\n                        as=\"h2\"\n                        className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\"\n                      >\n                        {externalMeta?.title || media.title}\n                      </Dialog.Title>\n\n                      {/* Meta Info */}\n                      <div className=\"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-4\">\n                        {media.year && (\n                          <div className=\"flex items-center gap-1\">\n                            <Calendar className=\"h-4 w-4\" />\n                            <span>{media.year}</span>\n                          </div>\n                        )}\n                        {media.rating && (\n                          <div className=\"flex items-center gap-1\">\n                            <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\n                            <span>{media.rating.toFixed(1)}</span>\n                          </div>\n                        )}\n                        {media.media_type && (\n                          <div className=\"flex items-center gap-1\">\n                            <Film className=\"h-4 w-4\" />\n                            <span className=\"capitalize\">{media.media_type.replace('_', ' ')}</span>\n                          </div>\n                        )}\n                        {media.quality && (\n                          <span className=\"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded text-xs font-semibold uppercase\">\n                            {media.quality}\n                          </span>\n                        )}\n                      </div>\n\n                      {/* Genres */}\n                      {externalMeta?.genres && externalMeta.genres.length > 0 && (\n                        <div className=\"flex flex-wrap gap-2 mb-4\">\n                          {externalMeta.genres.map((genre, index) => (\n                            <span\n                              key={index}\n                              className=\"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm\"\n                            >\n                              {genre}\n                            </span>\n                          ))}\n                        </div>\n                      )}\n\n                      {/* Description */}\n                      {(externalMeta?.description || media.description) && (\n                        <p className=\"text-gray-600 dark:text-gray-300 mb-6 line-clamp-4\">\n                          {externalMeta?.description || media.description}\n                        </p>\n                      )}\n\n                      {/* Action Buttons */}\n                      <div className=\"flex gap-3 mb-6\">\n                        {onPlay && (\n                          <Button\n                            onClick={() => onPlay(media)}\n                            className=\"flex items-center gap-2\"\n                          >\n                            <Play className=\"h-4 w-4\" />\n                            Play\n                          </Button>\n                        )}\n                        {onDownload && (\n                          <Button\n                            variant=\"outline\"\n                            onClick={() => onDownload(media)}\n                            className=\"flex items-center gap-2\"\n                          >\n                            <Download className=\"h-4 w-4\" />\n                            Download\n                          </Button>\n                        )}\n                      </div>\n\n                      {/* Technical Details */}\n                      <div className=\"grid grid-cols-2 gap-4\">\n                        {media.file_size && (\n                          <div className=\"flex items-start gap-2\">\n                            <HardDrive className=\"h-4 w-4 text-gray-400 mt-0.5\" />\n                            <div>\n                              <div className=\"text-xs text-gray-500 dark:text-gray-400\">File Size</div>\n                              <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                                {formatFileSize(media.file_size)}\n                              </div>\n                            </div>\n                          </div>\n                        )}\n                        {media.duration && (\n                          <div className=\"flex items-start gap-2\">\n                            <Clock className=\"h-4 w-4 text-gray-400 mt-0.5\" />\n                            <div>\n                              <div className=\"text-xs text-gray-500 dark:text-gray-400\">Duration</div>\n                              <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                                {formatDuration(media.duration)}\n                              </div>\n                            </div>\n                          </div>\n                        )}\n                        {media.storage_root_name && (\n                          <div className=\"flex items-start gap-2\">\n                            <Info className=\"h-4 w-4 text-gray-400 mt-0.5\" />\n                            <div>\n                              <div className=\"text-xs text-gray-500 dark:text-gray-400\">Storage</div>\n                              <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                                {media.storage_root_name}\n                              </div>\n                            </div>\n                          </div>\n                        )}\n                        {media.storage_root_protocol && (\n                          <div className=\"flex items-start gap-2\">\n                            <Info className=\"h-4 w-4 text-gray-400 mt-0.5\" />\n                            <div>\n                              <div className=\"text-xs text-gray-500 dark:text-gray-400\">Protocol</div>\n                              <div className=\"text-sm font-medium text-gray-900 dark:text-white uppercase\">\n                                {media.storage_root_protocol}\n                              </div>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Cast */}\n                  {externalMeta?.cast && externalMeta.cast.length > 0 && (\n                    <div className=\"mt-8\">\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">Cast</h3>\n                      <div className=\"flex flex-wrap gap-3\">\n                        {externalMeta.cast.slice(0, 10).map((actor, index) => (\n                          <span\n                            key={index}\n                            className=\"px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm\"\n                          >\n                            {actor}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Versions */}\n                  {media.versions && media.versions.length > 0 && (\n                    <div className=\"mt-8\">\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">Available Versions</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                        {media.versions.map((version) => (\n                          <Card key={version.id}>\n                            <CardContent className=\"p-4\">\n                              <div className=\"flex justify-between items-start\">\n                                <div>\n                                  <div className=\"font-medium text-gray-900 dark:text-white\">\n                                    {version.quality} - {version.resolution}\n                                  </div>\n                                  <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                                    {version.codec} • {formatFileSize(version.file_size)}\n                                  </div>\n                                </div>\n                                {version.language && (\n                                  <span className=\"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded\">\n                                    {version.language}\n                                  </span>\n                                )}\n                              </div>\n                            </CardContent>\n                          </Card>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </Dialog.Panel>\n            </Transition.Child>\n          </div>\n        </div>\n      </Dialog>\n    </Transition>\n  )\n}\n","import React, { useState, useCallback } from 'react';\nimport { Upload, X, File, CheckCircle, AlertCircle, Trash2 } from 'lucide-react';\nimport { Button } from '../ui/Button';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';\nimport { Progress } from '../ui/Progress';\n\ninterface UploadItem {\n  id: string;\n  file: File;\n  progress: number;\n  status: 'pending' | 'uploading' | 'success' | 'error';\n  error?: string;\n}\n\ninterface UploadManagerProps {\n  onUpload?: (files: File[]) => Promise<void>;\n  onRemove?: (id: string) => void;\n  onRetry?: (id: string) => void;\n  maxFileSize?: number;\n  acceptedTypes?: string[];\n  maxConcurrentUploads?: number;\n}\n\nexport const UploadManager: React.FC<UploadManagerProps> = ({\n  onUpload,\n  onRemove,\n  onRetry,\n  maxFileSize = 100 * 1024 * 1024, // 100MB\n  acceptedTypes = ['video/*', 'audio/*', 'image/*'],\n  maxConcurrentUploads = 3\n}) => {\n  const [uploadQueue, setUploadQueue] = useState<UploadItem[]>([]);\n  const [isDragOver, setIsDragOver] = useState(false);\n\n  const processFiles = useCallback((files: FileList) => {\n    const newItems: UploadItem[] = Array.from(files).map(file => ({\n      id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      file,\n      progress: 0,\n      status: 'pending'\n    }));\n\n    setUploadQueue(prev => [...prev, ...newItems]);\n    \n    // Auto-start uploads\n    setTimeout(() => startUploads(newItems), 100);\n  }, []);\n\n  const startUploads = useCallback(async (items: UploadItem[]) => {\n    for (const item of items) {\n      try {\n        setUploadQueue(prev => \n          prev.map(i => i.id === item.id ? { ...i, status: 'uploading' } : i)\n        );\n\n        // Simulate upload progress\n        for (let progress = 0; progress <= 100; progress += 10) {\n          await new Promise(resolve => setTimeout(resolve, 200));\n          setUploadQueue(prev => \n            prev.map(i => i.id === item.id ? { ...i, progress } : i)\n          );\n        }\n\n        setUploadQueue(prev => \n          prev.map(i => i.id === item.id ? { ...i, status: 'success' } : i)\n        );\n\n        onUpload?.([item.file]);\n      } catch (error) {\n        setUploadQueue(prev => \n          prev.map(i => i.id === item.id ? { \n            ...i, \n            status: 'error', \n            error: error instanceof Error ? error.message : 'Upload failed' \n          } : i)\n        );\n      }\n    }\n  }, [onUpload]);\n\n  const handleDrop = useCallback((e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    setIsDragOver(false);\n    \n    const files = Array.from(e.dataTransfer.files);\n    const validFiles = files.filter(file => {\n      if (file.size > maxFileSize) {\n        return false;\n      }\n      \n      if (acceptedTypes.length > 0 && !acceptedTypes.some(type => {\n        if (type.endsWith('/*')) {\n          return file.type.startsWith(type.slice(0, -2));\n        }\n        return file.type === type;\n      })) {\n        return false;\n      }\n      \n      return true;\n    });\n\n    processFiles(validFiles as any);\n  }, [processFiles, maxFileSize, acceptedTypes]);\n\n  const handleDragOver = useCallback((e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    setIsDragOver(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    setIsDragOver(false);\n  }, []);\n\n  const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      processFiles(e.target.files);\n    }\n  }, [processFiles]);\n\n  const removeItem = useCallback((id: string) => {\n    setUploadQueue(prev => prev.filter(item => item.id !== id));\n    onRemove?.(id);\n  }, [onRemove]);\n\n  const retryUpload = useCallback((id: string) => {\n    const item = uploadQueue.find(i => i.id === id);\n    if (item) {\n      startUploads([{ ...item, status: 'pending', progress: 0, error: undefined }]);\n    }\n  }, [uploadQueue, startUploads]);\n\n  const clearCompleted = useCallback(() => {\n    setUploadQueue(prev => prev.filter(item => item.status !== 'success'));\n  }, []);\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const getStatusIcon = (status: UploadItem['status']) => {\n    switch (status) {\n      case 'success':\n        return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\n      case 'error':\n        return <AlertCircle className=\"w-4 h-4 text-red-500\" />;\n      case 'uploading':\n        return <div className=\"w-4 h-4 border-2 border-blue-500 border-t-transparent animate-spin\" />;\n      default:\n        return <File className=\"w-4 h-4 text-gray-500\" />;\n    }\n  };\n\n  return (\n    <Card className=\"w-full max-w-4xl mx-auto\">\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2\">\n            <Upload className=\"h-5 w-5\" />\n            Upload Manager\n          </CardTitle>\n          {uploadQueue.some(item => item.status === 'success') && (\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={clearCompleted}\n            >\n              Clear Completed\n            </Button>\n          )}\n        </div>\n      </CardHeader>\n      \n      <CardContent>\n        {/* Drop Zone */}\n        <div\n          className={`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\n            isDragOver \n              ? 'border-blue-500 bg-blue-50' \n              : 'border-gray-300 hover:border-gray-400'\n          }`}\n          onDrop={handleDrop}\n          onDragOver={handleDragOver}\n          onDragLeave={handleDragLeave}\n        >\n          <Upload className=\"w-12 h-12 mx-auto mb-4 text-gray-400\" />\n          <p className=\"text-lg font-medium text-gray-700 mb-2\">\n            Drop files here or click to browse\n          </p>\n          <p className=\"text-sm text-gray-500 mb-4\">\n            Max file size: {formatFileSize(maxFileSize)}\n            {acceptedTypes.length > 0 && (\n              <> • Accepted types: {acceptedTypes.join(', ')}</>\n            )}\n          </p>\n          <input\n            type=\"file\"\n            multiple\n            accept={acceptedTypes.join(',')}\n            onChange={handleFileSelect}\n            className=\"hidden\"\n            id=\"file-input\"\n          />\n          <Button>\n            <label htmlFor=\"file-input\" className=\"cursor-pointer\">\n              Select Files\n            </label>\n          </Button>\n        </div>\n\n        {/* Upload Queue */}\n        {uploadQueue.length > 0 && (\n          <div className=\"mt-6\">\n            <h3 className=\"text-lg font-medium mb-4\">\n              Upload Queue ({uploadQueue.length} items)\n            </h3>\n            <div className=\"space-y-3\">\n              {uploadQueue.map(item => (\n                <div\n                  key={item.id}\n                  className=\"flex items-center gap-3 p-3 bg-gray-50 rounded-lg\"\n                >\n                  {getStatusIcon(item.status)}\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-sm font-medium text-gray-900 truncate\">\n                      {item.file.name}\n                    </p>\n                    <p className=\"text-xs text-gray-500\">\n                      {formatFileSize(item.file.size)}\n                    </p>\n                    {item.status === 'uploading' && (\n                      <Progress value={item.progress} className=\"mt-2\" />\n                    )}\n                    {item.status === 'error' && (\n                      <p className=\"text-xs text-red-500 mt-1\">{item.error}</p>\n                    )}\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    {item.status === 'error' && (\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => retryUpload(item.id)}\n                      >\n                        Retry\n                      </Button>\n                    )}\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => removeItem(item.id)}\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};","import React, { useState, useEffect, useMemo } from 'react'\nimport { useQuery } from '@tanstack/react-query'\nimport { MediaGrid } from '@/components/media/MediaGrid'\nimport { MediaFilters } from '@/components/media/MediaFilters'\nimport { MediaDetailModal } from '@/components/media/MediaDetailModal'\nimport { MediaPlayer } from '@/components/media/MediaPlayer'\nimport { Button } from '@/components/ui/Button'\nimport { Input } from '@/components/ui/Input'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/Card'\nimport { mediaApi } from '@/lib/mediaApi'\nimport { debounce } from '@/lib/utils'\nimport toast from 'react-hot-toast'\nimport type { MediaSearchRequest, MediaItem } from '@/types/media'\nimport {\n  Search,\n  Grid,\n  List,\n  SlidersHorizontal,\n  Download,\n  RefreshCw,\n  ChevronLeft,\n  ChevronRight,\n  Play,\n  Upload\n} from 'lucide-react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { UploadManager } from '@/components/upload/UploadManager'\n\nexport const MediaBrowser: React.FC = () => {\n  const [filters, setFilters] = useState<MediaSearchRequest>({\n    limit: 24,\n    offset: 0,\n    sort_by: 'updated_at',\n    sort_order: 'desc',\n  })\n  const [navigationKey, setNavigationKey] = useState(0)\n  const [showFilters, setShowFilters] = useState(false)\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid')\n  const [searchQuery, setSearchQuery] = useState('')\n  const [selectedMedia, setSelectedMedia] = useState<MediaItem | null>(null)\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  const [isPlayerOpen, setIsPlayerOpen] = useState(false)\n  const [isDownloading, setIsDownloading] = useState(false)\n  const [showUpload, setShowUpload] = useState(false)\n\n  const debouncedSearch = useMemo(\n    () => debounce((query: string) => {\n      setFilters(prev => ({\n        ...prev,\n        query: query || undefined,\n        offset: 0,\n      }))\n    }, 300),\n    []\n  )\n\n  useEffect(() => {\n    debouncedSearch(searchQuery)\n  }, [searchQuery, debouncedSearch])\n\n  const {\n    data: searchResults,\n    isLoading,\n    isError,\n    refetch\n  } = useQuery({\n    queryKey: ['media-search', filters, navigationKey],\n    queryFn: () => mediaApi.searchMedia(filters),\n    staleTime: 1000 * 60 * 5,\n  })\n\n  const { data: stats } = useQuery({\n    queryKey: ['media-stats'],\n    queryFn: mediaApi.getMediaStats,\n    staleTime: 1000 * 60 * 15,\n  })\n\n  const handleFiltersChange = (newFilters: MediaSearchRequest) => {\n    setFilters({\n      ...newFilters,\n      offset: 0, // Reset pagination when filters change\n    })\n  }\n\n  const handleResetFilters = () => {\n    setFilters({\n      limit: 24,\n      offset: 0,\n      sort_by: 'updated_at',\n      sort_order: 'desc',\n    })\n    setSearchQuery('')\n  }\n\n  const handleMediaView = (media: MediaItem) => {\n    setSelectedMedia(media)\n    setIsModalOpen(true)\n  }\n\n  const handleMediaPlay = (media: MediaItem) => {\n    setSelectedMedia(media)\n    setIsPlayerOpen(true)\n  }\n\n  const handleMediaDownload = async (media: MediaItem) => {\n    setIsDownloading(true)\n    try {\n      await mediaApi.downloadMedia(media)\n      toast.success(`Successfully downloaded ${media.title}`)\n    } catch (error) {\n      console.error('Download failed:', error)\n      toast.error(`Failed to download ${media.title}: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    } finally {\n      setIsDownloading(false)\n    }\n  }\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false)\n    setSelectedMedia(null)\n  }\n\n  const handleClosePlayer = () => {\n    setIsPlayerOpen(false)\n    setSelectedMedia(null)\n  }\n\n  const handlePageChange = (direction: 'prev' | 'next') => {\n    const currentPage = Math.floor((filters.offset || 0) / (filters.limit || 24))\n    const newOffset = direction === 'next'\n      ? (currentPage + 1) * (filters.limit || 24)\n      : Math.max(0, (currentPage - 1) * (filters.limit || 24))\n\n    setFilters(prev => ({ ...prev, offset: newOffset }))\n    setNavigationKey(prev => prev + 1) // Force React Query to refetch\n  }\n\n  const currentPage = Math.floor((filters.offset || 0) / (filters.limit || 24)) + 1\n  const totalPages = searchResults ? Math.ceil(searchResults.total / (filters.limit || 24)) : 0\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">\n          Media Browser\n        </h1>\n        <p className=\"text-gray-600 dark:text-gray-400\">\n          Explore and discover your media collection\n        </p>\n      </div>\n\n      {/* Stats Cards */}\n      {stats && (\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                {stats.total_items.toLocaleString()}\n              </div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Total Items</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                {Object.keys(stats.by_type).length}\n              </div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Media Types</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                {(stats.total_size / (1024 ** 3)).toFixed(1)} GB\n              </div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Total Size</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                {stats.recent_additions}\n              </div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Recent Additions</div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {/* Search and Controls */}\n      <div className=\"flex flex-col lg:flex-row gap-6 mb-8\">\n        <div className=\"flex-1\">\n          <Input\n            type=\"text\"\n            placeholder=\"Search your media collection...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            icon={<Search className=\"h-4 w-4\" />}\n            className=\"w-full\"\n          />\n        </div>\n\n        <div className=\"flex items-center space-x-3\">\n          <Button\n            variant=\"outline\"\n            onClick={() => setShowFilters(!showFilters)}\n            className=\"flex items-center\"\n            data-testid=\"filters-button\"\n          >\n            <SlidersHorizontal className=\"h-4 w-4 mr-2\" />\n            Filters\n          </Button>\n\n          <div className=\"flex border border-gray-300 rounded-lg dark:border-gray-600\">\n            <Button\n              variant={viewMode === 'grid' ? 'default' : 'ghost'}\n              size=\"sm\"\n              onClick={() => setViewMode('grid')}\n              className=\"rounded-r-none\"\n              data-testid=\"grid-view-button\"\n            >\n              <Grid className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant={viewMode === 'list' ? 'default' : 'ghost'}\n              size=\"sm\"\n              onClick={() => setViewMode('list')}\n              className=\"rounded-l-none\"\n              data-testid=\"list-view-button\"\n            >\n              <List className=\"h-4 w-4\" />\n            </Button>\n          </div>\n\n          <Button\n            variant=\"outline\"\n            onClick={() => setShowUpload(!showUpload)}\n            data-testid=\"upload-button\"\n          >\n            <Upload className=\"h-4 w-4\" />\n          </Button>\n\n          <Button\n            variant=\"outline\"\n            onClick={() => refetch()}\n            disabled={isLoading}\n            data-testid=\"refresh-button\"\n          >\n            <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\n          </Button>\n        </div>\n      </div>\n\n      {/* Upload Manager */}\n      <AnimatePresence>\n        {showUpload && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.3 }}\n            className=\"overflow-hidden mb-8\"\n          >\n            <UploadManager\n              onUpload={async () => { refetch() }}\n            />\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      <div className=\"flex gap-8\">\n        {/* Sidebar Filters */}\n        <AnimatePresence>\n          {showFilters && (\n            <motion.aside\n              initial={{ width: 0, opacity: 0 }}\n              animate={{ width: 320, opacity: 1 }}\n              exit={{ width: 0, opacity: 0 }}\n              transition={{ duration: 0.3 }}\n              className=\"overflow-hidden\"\n            >\n              <MediaFilters\n                filters={filters}\n                onFiltersChange={handleFiltersChange}\n                onReset={handleResetFilters}\n                className=\"sticky top-24\"\n              />\n            </motion.aside>\n          )}\n        </AnimatePresence>\n\n        {/* Main Content */}\n        <div className=\"flex-1 min-w-0\">\n          {/* Results Header */}\n          {searchResults && (\n            <div className=\"flex items-center justify-between mb-6\">\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Showing {searchResults.items.length} of {searchResults.total.toLocaleString()} results\n                {filters.query && (\n                  <span> for &quot;{filters.query}&quot;</span>\n                )}\n              </div>\n\n              {totalPages > 1 && (\n                <div className=\"flex items-center space-x-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handlePageChange('prev')}\n                    disabled={currentPage === 1}\n                    data-testid=\"prev-page-button\"\n                  >\n                    <ChevronLeft className=\"h-4 w-4\" />\n                  </Button>\n                  <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n                    Page {currentPage} of {totalPages}\n                  </span>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handlePageChange('next')}\n                    disabled={currentPage === totalPages}\n                    data-testid=\"next-page-button\"\n                  >\n                    <ChevronRight className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Error State */}\n          {isError && (\n            <Card className=\"text-center py-12\">\n              <CardContent>\n                <div className=\"text-red-500 mb-4\">\n                  <svg className=\"mx-auto h-12 w-12\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                  Failed to load media\n                </h3>\n                <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n                  There was an error loading your media collection.\n                </p>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => refetch()}\n                  className=\"mt-4\"\n                  data-testid=\"retry-button\"\n                >\n                  Try again\n                </Button>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Media Grid */}\n          {!isError && (\n            <MediaGrid\n              media={searchResults?.items || []}\n              loading={isLoading}\n              onMediaView={handleMediaView}\n              onMediaPlay={handleMediaPlay}\n              onMediaDownload={handleMediaDownload}\n            />\n          )}\n\n          {/* Pagination */}\n          {searchResults && totalPages > 1 && (\n            <div className=\"flex justify-center mt-12\">\n              <div className=\"flex items-center space-x-2\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => handlePageChange('prev')}\n                  disabled={currentPage === 1}\n                  data-testid=\"prev-page-button-main\"\n                >\n                  <ChevronLeft className=\"h-4 w-4 mr-1\" />\n                  Previous\n                </Button>\n                <span className=\"px-4 py-2 text-sm text-gray-600 dark:text-gray-400\">\n                  Page {currentPage} of {totalPages}\n                </span>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => handlePageChange('next')}\n                  disabled={currentPage === totalPages}\n                  data-testid=\"next-page-button-main\"\n                >\n                  Next\n                  <ChevronRight className=\"h-4 w-4 ml-1\" />\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Media Detail Modal */}\n      <MediaDetailModal\n        media={selectedMedia}\n        isOpen={isModalOpen}\n        onClose={handleCloseModal}\n        onDownload={handleMediaDownload}\n        onPlay={handleMediaPlay}\n      />\n\n      {/* Media Player Modal */}\n      {selectedMedia && isPlayerOpen && (\n        <div className=\"fixed inset-0 bg-black z-50 flex items-center justify-center p-4\">\n          <div className=\"relative w-full max-w-6xl\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={handleClosePlayer}\n              className=\"absolute -top-12 right-0 text-white hover:text-gray-300 z-10\"\n            >\n              Close\n            </Button>\n            <MediaPlayer \n              media={selectedMedia}\n              onEnded={handleClosePlayer}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}"],"names":["MEDIA_TYPES","QUALITY_LEVELS","MediaFilters","filters","onFiltersChange","onReset","className","updateFilter","key","value","clearFilter","newFilters","hasActiveFilters","jsxs","Card","jsx","CardHeader","CardTitle","Filter","Button","X","CardContent","Input","e","Search","type","quality","MediaDetailModal","media","isOpen","onClose","onDownload","onPlay","externalMeta","_a","posterUrl","backdropUrl","formatFileSize","bytes","sizes","i","formatDuration","seconds","hours","minutes","Transition","Fragment","Dialog","Calendar","Star","Film","genre","index","Play","Download","HardDrive","Clock","Info","actor","version","UploadManager","onUpload","onRemove","onRetry","maxFileSize","acceptedTypes","maxConcurrentUploads","uploadQueue","setUploadQueue","useState","isDragOver","setIsDragOver","processFiles","useCallback","files","newItems","file","prev","startUploads","items","item","progress","resolve","error","handleDrop","validFiles","handleDragOver","handleDragLeave","handleFileSelect","removeItem","id","retryUpload","clearCompleted","k","getStatusIcon","status","CheckCircle","AlertCircle","File","Upload","Progress","Trash2","MediaBrowser","setFilters","navigationKey","setNavigationKey","showFilters","setShowFilters","viewMode","setViewMode","searchQuery","setSearchQuery","selectedMedia","setSelectedMedia","isModalOpen","setIsModalOpen","isPlayerOpen","setIsPlayerOpen","isDownloading","setIsDownloading","showUpload","setShowUpload","debouncedSearch","useMemo","debounce","query","useEffect","searchResults","isLoading","isError","refetch","useQuery","mediaApi","stats","handleFiltersChange","handleResetFilters","handleMediaView","handleMediaPlay","handleMediaDownload","toast","handleCloseModal","handleClosePlayer","handlePageChange","direction","currentPage","newOffset","totalPages","SlidersHorizontal","Grid","List","RefreshCw","AnimatePresence","motion","ChevronLeft","ChevronRight","MediaGrid","MediaPlayer"],"mappings":"ysBAiFO,MAAMA,GAAc,CACzB,QACA,UACA,QACA,OACA,WACA,cACA,UACA,WACA,YACA,QACA,UACA,gBACA,gBACA,QACA,SACA,MACF,EAIaC,GAAiB,CAC5B,MACA,KACA,SACA,QACA,OACA,QACA,KACA,MACA,cACF,ECjGaC,GAA4C,CAAC,CACxD,QAAAC,EACA,gBAAAC,EACA,QAAAC,EACA,UAAAC,EAAY,EACd,IAAM,CACJ,MAAMC,EAAe,CAACC,EAA+BC,IAAe,CAClEL,EAAgB,CACd,GAAGD,EACH,CAACK,CAAG,EAAGC,CAAA,CACR,CACH,EAEMC,EAAeF,GAAkC,CACrD,MAAMG,EAAa,CAAE,GAAGR,CAAA,EACxB,OAAOQ,EAAWH,CAAG,EACrBJ,EAAgBO,CAAU,CAC5B,EAEMC,EAAmB,OAAO,KAAKT,CAAO,EAAE,QACrCK,IAAQ,SAAWA,IAAQ,UAAYL,EAAQK,CAA+B,IAAM,MAAA,EAG7F,OACEK,OAACC,GAAK,UAAAR,EACJ,SAAA,CAAAS,EAAAA,IAACC,GAAW,UAAU,OACpB,SAAAH,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAACI,GAAA,CAAU,UAAU,4BACnB,SAAA,CAAAF,EAAAA,IAACG,GAAA,CAAO,UAAU,cAAA,CAAe,EAAE,SAAA,EAErC,EACCN,GACCC,EAAAA,KAACM,EAAA,CACC,QAAQ,QACR,KAAK,KACL,QAASd,EACT,UAAU,oCAEV,SAAA,CAAAU,EAAAA,IAACK,EAAA,CAAE,UAAU,cAAA,CAAe,EAAE,WAAA,CAAA,CAAA,CAEhC,CAAA,CAEJ,CAAA,CACF,EAEAP,EAAAA,KAACQ,EAAA,CAAY,UAAU,YAErB,SAAA,CAAAN,MAAC,MAAA,CACC,SAAAA,EAAAA,IAACO,EAAA,CACC,MAAM,SACN,KAAK,OACL,YAAY,yBACZ,MAAOnB,EAAQ,OAAS,GACxB,SAAWoB,GAAMhB,EAAa,QAASgB,EAAE,OAAO,OAAS,MAAS,EAClE,KAAMR,EAAAA,IAACS,GAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAAA,EAEtC,SAGC,MAAA,CACC,SAAA,CAAAT,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,aAEnF,QACC,MAAA,CAAI,UAAU,uBACZ,SAAAf,GAAY,IAAKyB,GAChBZ,EAAAA,KAACM,EAAA,CAEC,QAAShB,EAAQ,aAAesB,EAAO,UAAY,UACnD,KAAK,KACL,QAAS,IACPtB,EAAQ,aAAesB,EACnBf,EAAY,YAAY,EACxBH,EAAa,aAAckB,CAAI,EAErC,UAAU,UAET,SAAA,CAAAA,EAAK,QAAQ,IAAK,GAAG,EACrBtB,EAAQ,aAAesB,GACtBV,EAAAA,IAACK,EAAA,CAAE,UAAU,cAAA,CAAe,CAAA,CAAA,EAZzBK,CAAA,CAeR,CAAA,CACH,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAV,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,UAEnF,QACC,MAAA,CAAI,UAAU,uBACZ,SAAAd,GAAe,IAAKyB,GACnBb,EAAAA,KAACM,EAAA,CAEC,QAAShB,EAAQ,UAAYuB,EAAU,UAAY,UACnD,KAAK,KACL,QAAS,IACPvB,EAAQ,UAAYuB,EAChBhB,EAAY,SAAS,EACrBH,EAAa,UAAWmB,CAAO,EAErC,UAAU,UAET,SAAA,CAAAA,EAAQ,YAAA,EACRvB,EAAQ,UAAYuB,GACnBX,EAAAA,IAACK,EAAA,CAAE,UAAU,cAAA,CAAe,CAAA,CAAA,EAZzBM,CAAA,CAeR,CAAA,CACH,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,aAEnF,EACAF,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAE,EAAAA,IAACO,EAAA,CACC,KAAK,SACL,YAAY,OACZ,MAAOnB,EAAQ,UAAY,GAC3B,SAAWoB,GACThB,EAAa,WAAYgB,EAAE,OAAO,MAAQ,OAAOA,EAAE,OAAO,KAAK,EAAI,MAAS,EAE9E,IAAI,OACJ,IAAK,IAAI,KAAA,EAAO,YAAA,CAAY,CAAA,EAE9BR,EAAAA,IAACO,EAAA,CACC,KAAK,SACL,YAAY,KACZ,MAAOnB,EAAQ,UAAY,GAC3B,SAAWoB,GACThB,EAAa,WAAYgB,EAAE,OAAO,MAAQ,OAAOA,EAAE,OAAO,KAAK,EAAI,MAAS,EAE9E,IAAI,OACJ,IAAK,IAAI,KAAA,EAAO,YAAA,CAAY,CAAA,CAC9B,CAAA,CACF,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAR,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,iBAEnF,EACAA,EAAAA,IAACO,EAAA,CACC,KAAK,SACL,YAAY,MACZ,MAAOnB,EAAQ,YAAc,GAC7B,SAAWoB,GACThB,EAAa,aAAcgB,EAAE,OAAO,MAAQ,OAAOA,EAAE,OAAO,KAAK,EAAI,MAAS,EAEhF,IAAI,IACJ,IAAI,KACJ,KAAK,KAAA,CAAA,CACP,EACF,SAGC,MAAA,CACC,SAAA,CAAAR,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,UAEnF,EACAF,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,UAAU,+JACV,MAAOV,EAAQ,SAAW,aAC1B,SAAWoB,GAAMhB,EAAa,UAAWgB,EAAE,OAAO,KAAK,EAEvD,SAAA,CAAAR,EAAAA,IAAC,SAAA,CAAO,MAAM,aAAa,SAAA,eAAY,EACvCA,EAAAA,IAAC,SAAA,CAAO,MAAM,aAAa,SAAA,aAAU,EACrCA,EAAAA,IAAC,SAAA,CAAO,MAAM,QAAQ,SAAA,QAAK,EAC3BA,EAAAA,IAAC,SAAA,CAAO,MAAM,OAAO,SAAA,OAAI,EACzBA,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,SAAM,EAC7BA,EAAAA,IAAC,SAAA,CAAO,MAAM,YAAY,SAAA,WAAA,CAAS,CAAA,CAAA,CAAA,EAGrCF,EAAAA,KAAC,SAAA,CACC,UAAU,+JACV,MAAOV,EAAQ,YAAc,OAC7B,SAAWoB,GAAMhB,EAAa,aAAcgB,EAAE,OAAO,KAAuB,EAE5E,SAAA,CAAAR,EAAAA,IAAC,SAAA,CAAO,MAAM,OAAO,SAAA,aAAU,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,MAAM,SAAA,WAAA,CAAS,CAAA,CAAA,CAAA,CAC/B,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,EC/LaY,GAAoD,CAAC,CAChE,MAAAC,EACA,OAAAC,EACA,QAAAC,EACA,WAAAC,EACA,OAAAC,CACF,IAAM,OACJ,GAAI,CAACJ,EAAO,OAAO,KAEnB,MAAMK,GAAeC,EAAAN,EAAM,oBAAN,YAAAM,EAA0B,GACzCC,GAAYF,GAAA,YAAAA,EAAc,aAAcL,EAAM,YAC9CQ,EAAcH,GAAA,YAAAA,EAAc,aAE5BI,EAAkBC,GAAmB,CACzC,GAAI,CAACA,EAAO,MAAO,UACnB,MAAMC,EAAQ,CAAC,QAAS,KAAM,KAAM,KAAM,IAAI,EACxCC,EAAI,KAAK,MAAM,KAAK,IAAIF,CAAK,EAAI,KAAK,IAAI,IAAI,CAAC,EACrD,MAAO,IAAIA,EAAQ,KAAK,IAAI,KAAME,CAAC,GAAG,QAAQ,CAAC,CAAC,IAAID,EAAMC,CAAC,CAAC,EAC9D,EAEMC,EAAkBC,GAAqB,CAC3C,GAAI,CAACA,EAAS,MAAO,UACrB,MAAMC,EAAQ,KAAK,MAAMD,EAAU,IAAI,EACjCE,EAAU,KAAK,MAAOF,EAAU,KAAQ,EAAE,EAChD,OAAIC,EAAQ,EACH,GAAGA,CAAK,KAAKC,CAAO,IAEtB,GAAGA,CAAO,GACnB,EAEA,OACE7B,EAAAA,IAAC8B,EAAA,CAAW,OAAM,GAAC,KAAMhB,EAAQ,GAAIiB,EAAAA,SACnC,SAAAjC,OAACkC,EAAA,CAAO,GAAG,MAAM,UAAU,gBAAgB,QAAAjB,EACzC,SAAA,CAAAf,EAAAA,IAAC8B,EAAW,MAAX,CACC,GAAIC,EAAAA,SACJ,MAAM,wBACN,UAAU,YACV,QAAQ,cACR,MAAM,uBACN,UAAU,cACV,QAAQ,YAER,SAAA/B,EAAAA,IAAC,MAAA,CAAI,UAAU,sCAAA,CAAuC,CAAA,CAAA,QAGvD,MAAA,CAAI,UAAU,gCACb,SAAAA,MAAC,MAAA,CAAI,UAAU,8DACb,SAAAA,EAAAA,IAAC8B,EAAW,MAAX,CACC,GAAIC,EAAAA,SACJ,MAAM,wBACN,UAAU,qBACV,QAAQ,wBACR,MAAM,uBACN,UAAU,wBACV,QAAQ,qBAER,SAAAjC,EAAAA,KAACkC,EAAO,MAAP,CAAa,UAAU,mIAErB,SAAA,CAAAX,GACCvB,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAAE,EAAAA,IAAC,MAAA,CACC,IAAKqB,EACL,IAAKR,EAAM,MACX,UAAU,4BAAA,CAAA,EAEZb,EAAAA,IAAC,MAAA,CAAI,UAAU,gFAAA,CAAiF,CAAA,EAClG,EAIFA,EAAAA,IAAC,SAAA,CACC,QAASe,EACT,UAAU,uHAEV,SAAAf,EAAAA,IAACK,EAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,EAIzBP,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,aAEZ,SAAA,CAAAsB,GACCpB,EAAAA,IAAC,MAAA,CAAI,UAAU,gBACb,SAAAA,EAAAA,IAAC,MAAA,CACC,IAAKoB,EACL,IAAKP,EAAM,MACX,UAAU,8CAAA,CAAA,EAEd,EAIFf,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAE,EAAAA,IAACgC,EAAO,MAAP,CACC,GAAG,KACH,UAAU,wDAET,UAAAd,GAAA,YAAAA,EAAc,QAASL,EAAM,KAAA,CAAA,EAIhCf,EAAAA,KAAC,MAAA,CAAI,UAAU,wEACZ,SAAA,CAAAe,EAAM,MACLf,OAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAACiC,GAAA,CAAS,UAAU,SAAA,CAAU,EAC9BjC,EAAAA,IAAC,OAAA,CAAM,SAAAa,EAAM,IAAA,CAAK,CAAA,EACpB,EAEDA,EAAM,QACLf,OAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAACkC,GAAA,CAAK,UAAU,yCAAA,CAA0C,QACzD,OAAA,CAAM,SAAArB,EAAM,OAAO,QAAQ,CAAC,CAAA,CAAE,CAAA,EACjC,EAEDA,EAAM,YACLf,OAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAACmC,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BnC,EAAAA,IAAC,QAAK,UAAU,aAAc,WAAM,WAAW,QAAQ,IAAK,GAAG,CAAA,CAAE,CAAA,EACnE,EAEDa,EAAM,SACLb,EAAAA,IAAC,QAAK,UAAU,kHACb,WAAM,OAAA,CACT,CAAA,EAEJ,GAGCkB,GAAA,YAAAA,EAAc,SAAUA,EAAa,OAAO,OAAS,GACpDlB,EAAAA,IAAC,MAAA,CAAI,UAAU,4BACZ,SAAAkB,EAAa,OAAO,IAAI,CAACkB,EAAOC,IAC/BrC,EAAAA,IAAC,OAAA,CAEC,UAAU,+FAET,SAAAoC,CAAA,EAHIC,CAAA,CAKR,EACH,IAIAnB,GAAA,YAAAA,EAAc,cAAeL,EAAM,cACnCb,EAAAA,IAAC,IAAA,CAAE,UAAU,qDACV,UAAAkB,GAAA,YAAAA,EAAc,cAAeL,EAAM,WAAA,CACtC,EAIFf,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACZ,SAAA,CAAAmB,GACCnB,EAAAA,KAACM,EAAA,CACC,QAAS,IAAMa,EAAOJ,CAAK,EAC3B,UAAU,0BAEV,SAAA,CAAAb,EAAAA,IAACsC,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,MAAA,CAAA,CAAA,EAI/BtB,GACClB,EAAAA,KAACM,EAAA,CACC,QAAQ,UACR,QAAS,IAAMY,EAAWH,CAAK,EAC/B,UAAU,0BAEV,SAAA,CAAAb,EAAAA,IAACuC,GAAA,CAAS,UAAU,SAAA,CAAU,EAAE,UAAA,CAAA,CAAA,CAElC,EAEJ,EAGAzC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACZ,SAAA,CAAAe,EAAM,WACLf,OAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAE,EAAAA,IAACwC,GAAA,CAAU,UAAU,8BAAA,CAA+B,SACnD,MAAA,CACC,SAAA,CAAAxC,EAAAA,IAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,YAAS,QAClE,MAAA,CAAI,UAAU,oDACZ,SAAAsB,EAAeT,EAAM,SAAS,CAAA,CACjC,CAAA,CAAA,CACF,CAAA,EACF,EAEDA,EAAM,UACLf,OAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAE,EAAAA,IAACyC,GAAA,CAAM,UAAU,8BAAA,CAA+B,SAC/C,MAAA,CACC,SAAA,CAAAzC,EAAAA,IAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,WAAQ,QACjE,MAAA,CAAI,UAAU,oDACZ,SAAA0B,EAAeb,EAAM,QAAQ,CAAA,CAChC,CAAA,CAAA,CACF,CAAA,EACF,EAEDA,EAAM,mBACLf,OAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAE,EAAAA,IAAC0C,EAAA,CAAK,UAAU,8BAAA,CAA+B,SAC9C,MAAA,CACC,SAAA,CAAA1C,EAAAA,IAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,UAAO,EACjEA,EAAAA,IAAC,MAAA,CAAI,UAAU,oDACZ,WAAM,iBAAA,CACT,CAAA,CAAA,CACF,CAAA,EACF,EAEDa,EAAM,uBACLf,OAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAE,EAAAA,IAAC0C,EAAA,CAAK,UAAU,8BAAA,CAA+B,SAC9C,MAAA,CACC,SAAA,CAAA1C,EAAAA,IAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,WAAQ,EAClEA,EAAAA,IAAC,MAAA,CAAI,UAAU,8DACZ,WAAM,qBAAA,CACT,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EACF,GAGCkB,GAAA,YAAAA,EAAc,OAAQA,EAAa,KAAK,OAAS,GAChDpB,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,2DAA2D,SAAA,OAAI,EAC7EA,EAAAA,IAAC,MAAA,CAAI,UAAU,uBACZ,SAAAkB,EAAa,KAAK,MAAM,EAAG,EAAE,EAAE,IAAI,CAACyB,EAAON,IAC1CrC,EAAAA,IAAC,OAAA,CAEC,UAAU,6FAET,SAAA2C,CAAA,EAHIN,CAAA,CAKR,CAAA,CACH,CAAA,EACF,EAIDxB,EAAM,UAAYA,EAAM,SAAS,OAAS,GACzCf,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,2DAA2D,SAAA,qBAAkB,QAC1F,MAAA,CAAI,UAAU,wCACZ,SAAAa,EAAM,SAAS,IAAK+B,GACnB5C,EAAAA,IAACD,EAAA,CACC,eAACO,EAAA,CAAY,UAAU,MACrB,SAAAR,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACZ,SAAA,CAAA8C,EAAQ,QAAQ,MAAIA,EAAQ,UAAA,EAC/B,EACA9C,EAAAA,KAAC,MAAA,CAAI,UAAU,2CACZ,SAAA,CAAA8C,EAAQ,MAAM,MAAItB,EAAesB,EAAQ,SAAS,CAAA,CAAA,CACrD,CAAA,EACF,EACCA,EAAQ,UACP5C,EAAAA,IAAC,QAAK,UAAU,yDACb,WAAQ,QAAA,CACX,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,EAjBS4C,EAAQ,EAkBnB,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,EAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,EC3QaC,GAA8C,CAAC,CAC1D,SAAAC,EACA,SAAAC,EACA,QAAAC,EACA,YAAAC,EAAc,IAAM,KAAO,KAC3B,cAAAC,EAAgB,CAAC,UAAW,UAAW,SAAS,EAChD,qBAAAC,EAAuB,CACzB,IAAM,CACJ,KAAM,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAAuB,CAAA,CAAE,EACzD,CAACC,EAAYC,CAAa,EAAIF,EAAAA,SAAS,EAAK,EAE5CG,EAAeC,cAAaC,GAAoB,CACpD,MAAMC,EAAyB,MAAM,KAAKD,CAAK,EAAE,IAAIE,IAAS,CAC5D,GAAI,GAAG,KAAK,IAAA,CAAK,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,OAAO,EAAG,CAAC,CAAC,GAC5D,KAAAA,EACA,SAAU,EACV,OAAQ,SAAA,EACR,EAEFR,KAAuB,CAAC,GAAGS,EAAM,GAAGF,CAAQ,CAAC,EAG7C,WAAW,IAAMG,EAAaH,CAAQ,EAAG,GAAG,CAC9C,EAAG,CAAA,CAAE,EAECG,EAAeL,cAAY,MAAOM,GAAwB,CAC9D,UAAWC,KAAQD,EACjB,GAAI,CACFX,EAAeS,GACbA,EAAK,IAAIrC,GAAKA,EAAE,KAAOwC,EAAK,GAAK,CAAE,GAAGxC,EAAG,OAAQ,WAAA,EAAgBA,CAAC,CAAA,EAIpE,QAASyC,EAAW,EAAGA,GAAY,IAAKA,GAAY,GAClD,MAAM,IAAI,QAAQC,GAAW,WAAWA,EAAS,GAAG,CAAC,EACrDd,EAAeS,GACbA,EAAK,IAAIrC,GAAKA,EAAE,KAAOwC,EAAK,GAAK,CAAE,GAAGxC,EAAG,SAAAyC,CAAA,EAAazC,CAAC,CAAA,EAI3D4B,EAAeS,GACbA,EAAK,IAAIrC,GAAKA,EAAE,KAAOwC,EAAK,GAAK,CAAE,GAAGxC,EAAG,OAAQ,SAAA,EAAcA,CAAC,CAAA,EAGlEqB,GAAA,MAAAA,EAAW,CAACmB,EAAK,IAAI,EACvB,OAASG,EAAO,CACdf,KACES,EAAK,OAASrC,EAAE,KAAOwC,EAAK,GAAK,CAC/B,GAAGxC,EACH,OAAQ,QACR,MAAO2C,aAAiB,MAAQA,EAAM,QAAU,eAAA,EAC9C3C,CAAC,CAAA,CAET,CAEJ,EAAG,CAACqB,CAAQ,CAAC,EAEPuB,EAAaX,cAAalD,GAAuC,CACrEA,EAAE,eAAA,EACFgD,EAAc,EAAK,EAGnB,MAAMc,EADQ,MAAM,KAAK9D,EAAE,aAAa,KAAK,EACpB,OAAOqD,GAC1B,EAAAA,EAAK,KAAOZ,GAIZC,EAAc,OAAS,GAAK,CAACA,EAAc,KAAKxC,GAC9CA,EAAK,SAAS,IAAI,EACbmD,EAAK,KAAK,WAAWnD,EAAK,MAAM,EAAG,EAAE,CAAC,EAExCmD,EAAK,OAASnD,CACtB,EAKF,EAED+C,EAAaa,CAAiB,CAChC,EAAG,CAACb,EAAcR,EAAaC,CAAa,CAAC,EAEvCqB,EAAiBb,cAAalD,GAAuC,CACzEA,EAAE,eAAA,EACFgD,EAAc,EAAI,CACpB,EAAG,CAAA,CAAE,EAECgB,EAAkBd,cAAalD,GAAuC,CAC1EA,EAAE,eAAA,EACFgD,EAAc,EAAK,CACrB,EAAG,CAAA,CAAE,EAECiB,EAAmBf,cAAalD,GAA2C,CAC3EA,EAAE,OAAO,OACXiD,EAAajD,EAAE,OAAO,KAAK,CAE/B,EAAG,CAACiD,CAAY,CAAC,EAEXiB,EAAahB,cAAaiB,GAAe,CAC7CtB,KAAuBS,EAAK,UAAeG,EAAK,KAAOU,CAAE,CAAC,EAC1D5B,GAAA,MAAAA,EAAW4B,EACb,EAAG,CAAC5B,CAAQ,CAAC,EAEP6B,EAAclB,cAAaiB,GAAe,CAC9C,MAAMV,EAAOb,EAAY,KAAK3B,GAAKA,EAAE,KAAOkD,CAAE,EAC1CV,GACFF,EAAa,CAAC,CAAE,GAAGE,EAAM,OAAQ,UAAW,SAAU,EAAG,MAAO,MAAA,CAAW,CAAC,CAEhF,EAAG,CAACb,EAAaW,CAAY,CAAC,EAExBc,EAAiBnB,EAAAA,YAAY,IAAM,CACvCL,KAAuBS,EAAK,UAAeG,EAAK,SAAW,SAAS,CAAC,CACvE,EAAG,CAAA,CAAE,EAEC3C,EAAkBC,GAAkB,CACxC,GAAIA,IAAU,EAAG,MAAO,UACxB,MAAMuD,EAAI,KACJtD,EAAQ,CAAC,QAAS,KAAM,KAAM,IAAI,EAClCC,EAAI,KAAK,MAAM,KAAK,IAAIF,CAAK,EAAI,KAAK,IAAIuD,CAAC,CAAC,EAClD,OAAO,YAAYvD,EAAQ,KAAK,IAAIuD,EAAGrD,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAI,IAAMD,EAAMC,CAAC,CACxE,EAEMsD,EAAiBC,GAAiC,CACtD,OAAQA,EAAA,CACN,IAAK,UACH,OAAOhF,EAAAA,IAACiF,GAAA,CAAY,UAAU,wBAAA,CAAyB,EACzD,IAAK,QACH,OAAOjF,EAAAA,IAACkF,GAAA,CAAY,UAAU,sBAAA,CAAuB,EACvD,IAAK,YACH,OAAOlF,EAAAA,IAAC,MAAA,CAAI,UAAU,oEAAA,CAAqE,EAC7F,QACE,OAAOA,EAAAA,IAACmF,GAAA,CAAK,UAAU,uBAAA,CAAwB,CAAA,CAErD,EAEA,OACErF,EAAAA,KAACC,EAAA,CAAK,UAAU,2BACd,SAAA,CAAAC,MAACC,EAAA,CACC,SAAAH,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAACI,GAAA,CAAU,UAAU,0BACnB,SAAA,CAAAF,EAAAA,IAACoF,EAAA,CAAO,UAAU,SAAA,CAAU,EAAE,gBAAA,EAEhC,EACChC,EAAY,KAAKa,GAAQA,EAAK,SAAW,SAAS,GACjDjE,EAAAA,IAACI,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAASyE,EACV,SAAA,iBAAA,CAAA,CAED,CAAA,CAEJ,CAAA,CACF,SAECvE,EAAA,CAEC,SAAA,CAAAR,EAAAA,KAAC,MAAA,CACC,UAAW,uEACTyD,EACI,6BACA,uCACN,GACA,OAAQc,EACR,WAAYE,EACZ,YAAaC,EAEb,SAAA,CAAAxE,EAAAA,IAACoF,EAAA,CAAO,UAAU,sCAAA,CAAuC,EACzDpF,EAAAA,IAAC,IAAA,CAAE,UAAU,yCAAyC,SAAA,qCAEtD,EACAF,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,kBACxBwB,EAAe2B,CAAW,EACzCC,EAAc,OAAS,GACtBpD,EAAAA,KAAAiC,EAAAA,SAAA,CAAE,SAAA,CAAA,sBAAoBmB,EAAc,KAAK,IAAI,CAAA,CAAA,CAAE,CAAA,EAEnD,EACAlD,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,SAAQ,GACR,OAAQkD,EAAc,KAAK,GAAG,EAC9B,SAAUuB,EACV,UAAU,SACV,GAAG,YAAA,CAAA,EAELzE,EAAAA,IAACI,GACC,SAAAJ,EAAAA,IAAC,QAAA,CAAM,QAAQ,aAAa,UAAU,iBAAiB,SAAA,cAAA,CAEvD,CAAA,CACF,CAAA,CAAA,CAAA,EAIDoD,EAAY,OAAS,GACpBtD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,2BAA2B,SAAA,CAAA,iBACxBsD,EAAY,OAAO,SAAA,EACpC,QACC,MAAA,CAAI,UAAU,YACZ,SAAAA,EAAY,IAAIa,GACfnE,EAAAA,KAAC,MAAA,CAEC,UAAU,oDAET,SAAA,CAAAiF,EAAcd,EAAK,MAAM,EAC1BnE,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAE,MAAC,IAAA,CAAE,UAAU,6CACV,SAAAiE,EAAK,KAAK,KACb,EACAjE,EAAAA,IAAC,KAAE,UAAU,wBACV,WAAeiE,EAAK,KAAK,IAAI,EAChC,EACCA,EAAK,SAAW,aACfjE,EAAAA,IAACqF,IAAS,MAAOpB,EAAK,SAAU,UAAU,MAAA,CAAO,EAElDA,EAAK,SAAW,SACfjE,EAAAA,IAAC,KAAE,UAAU,4BAA6B,WAAK,KAAA,CAAM,CAAA,EAEzD,EACAF,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACZ,SAAA,CAAAmE,EAAK,SAAW,SACfjE,EAAAA,IAACI,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IAAMwE,EAAYX,EAAK,EAAE,EACnC,SAAA,OAAA,CAAA,EAIHjE,EAAAA,IAACI,EAAA,CACC,QAAQ,QACR,KAAK,KACL,QAAS,IAAMsE,EAAWT,EAAK,EAAE,EAEjC,SAAAjE,EAAAA,IAACsF,GAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAAA,CAC9B,CAAA,CACF,CAAA,CAAA,EAnCKrB,EAAK,EAAA,CAqCb,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,CAEJ,EChPasB,GAAyB,IAAM,CAC1C,KAAM,CAACnG,EAASoG,CAAU,EAAIlC,WAA6B,CACzD,MAAO,GACP,OAAQ,EACR,QAAS,aACT,WAAY,MAAA,CACb,EACK,CAACmC,EAAeC,CAAgB,EAAIpC,EAAAA,SAAS,CAAC,EAC9C,CAACqC,EAAaC,CAAc,EAAItC,EAAAA,SAAS,EAAK,EAC9C,CAACuC,EAAUC,CAAW,EAAIxC,EAAAA,SAA0B,MAAM,EAC1D,CAACyC,EAAaC,CAAc,EAAI1C,EAAAA,SAAS,EAAE,EAC3C,CAAC2C,EAAeC,CAAgB,EAAI5C,EAAAA,SAA2B,IAAI,EACnE,CAAC6C,EAAaC,CAAc,EAAI9C,EAAAA,SAAS,EAAK,EAC9C,CAAC+C,EAAcC,CAAe,EAAIhD,EAAAA,SAAS,EAAK,EAChD,CAACiD,EAAeC,CAAgB,EAAIlD,EAAAA,SAAS,EAAK,EAClD,CAACmD,EAAYC,CAAa,EAAIpD,EAAAA,SAAS,EAAK,EAE5CqD,EAAkBC,EAAAA,QACtB,IAAMC,GAAUC,GAAkB,CAChCtB,EAAW1B,IAAS,CAClB,GAAGA,EACH,MAAOgD,GAAS,OAChB,OAAQ,CAAA,EACR,CACJ,EAAG,GAAG,EACN,CAAA,CAAC,EAGHC,EAAAA,UAAU,IAAM,CACdJ,EAAgBZ,CAAW,CAC7B,EAAG,CAACA,EAAaY,CAAe,CAAC,EAEjC,KAAM,CACJ,KAAMK,EACN,UAAAC,EACA,QAAAC,EACA,QAAAC,CAAA,EACEC,EAAS,CACX,SAAU,CAAC,eAAgBhI,EAASqG,CAAa,EACjD,QAAS,IAAM4B,EAAS,YAAYjI,CAAO,EAC3C,UAAW,IAAO,GAAK,CAAA,CACxB,EAEK,CAAE,KAAMkI,CAAA,EAAUF,EAAS,CAC/B,SAAU,CAAC,aAAa,EACxB,QAASC,EAAS,cAClB,UAAW,IAAO,GAAK,EAAA,CACxB,EAEKE,GAAuB3H,GAAmC,CAC9D4F,EAAW,CACT,GAAG5F,EACH,OAAQ,CAAA,CACT,CACH,EAEM4H,GAAqB,IAAM,CAC/BhC,EAAW,CACT,MAAO,GACP,OAAQ,EACR,QAAS,aACT,WAAY,MAAA,CACb,EACDQ,EAAe,EAAE,CACnB,EAEMyB,GAAmB5G,GAAqB,CAC5CqF,EAAiBrF,CAAK,EACtBuF,EAAe,EAAI,CACrB,EAEMsB,EAAmB7G,GAAqB,CAC5CqF,EAAiBrF,CAAK,EACtByF,EAAgB,EAAI,CACtB,EAEMqB,EAAsB,MAAO9G,GAAqB,CACtD2F,EAAiB,EAAI,EACrB,GAAI,CACF,MAAMa,EAAS,cAAcxG,CAAK,EAClC+G,EAAM,QAAQ,2BAA2B/G,EAAM,KAAK,EAAE,CACxD,OAASuD,EAAO,CACd,QAAQ,MAAM,mBAAoBA,CAAK,EACvCwD,EAAM,MAAM,sBAAsB/G,EAAM,KAAK,KAAKuD,aAAiB,MAAQA,EAAM,QAAU,eAAe,EAAE,CAC9G,QAAA,CACEoC,EAAiB,EAAK,CACxB,CACF,EAEMqB,GAAmB,IAAM,CAC7BzB,EAAe,EAAK,EACpBF,EAAiB,IAAI,CACvB,EAEM4B,EAAoB,IAAM,CAC9BxB,EAAgB,EAAK,EACrBJ,EAAiB,IAAI,CACvB,EAEM6B,EAAoBC,GAA+B,CACvD,MAAMC,EAAc,KAAK,OAAO7I,EAAQ,QAAU,IAAMA,EAAQ,OAAS,GAAG,EACtE8I,GAAYF,IAAc,QAC3BC,EAAc,IAAM7I,EAAQ,OAAS,IACtC,KAAK,IAAI,GAAI6I,EAAc,IAAM7I,EAAQ,OAAS,GAAG,EAEzDoG,MAAoB,CAAE,GAAG1B,EAAM,OAAQoE,IAAY,EACnDxC,EAAiB5B,GAAQA,EAAO,CAAC,CACnC,EAEMmE,EAAc,KAAK,OAAO7I,EAAQ,QAAU,IAAMA,EAAQ,OAAS,GAAG,EAAI,EAC1E+I,EAAanB,EAAgB,KAAK,KAAKA,EAAc,OAAS5H,EAAQ,OAAS,GAAG,EAAI,EAE5F,OACEU,EAAAA,KAAC,MAAA,CAAI,UAAU,8CAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,wDAAwD,SAAA,gBAEtE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAmC,SAAA,4CAAA,CAEhD,CAAA,EACF,EAGCsH,GACCxH,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAE,MAACD,EAAA,CACC,SAAAD,EAAAA,KAACQ,EAAA,CAAY,UAAU,MACrB,SAAA,CAAAN,MAAC,OAAI,UAAU,mDACZ,SAAAsH,EAAM,YAAY,iBACrB,EACAtH,EAAAA,IAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,aAAA,CAAW,CAAA,CAAA,CACvE,CAAA,CACF,EACAA,MAACD,EAAA,CACC,SAAAD,EAAAA,KAACQ,EAAA,CAAY,UAAU,MACrB,SAAA,CAAAN,EAAAA,IAAC,MAAA,CAAI,UAAU,mDACZ,SAAA,OAAO,KAAKsH,EAAM,OAAO,EAAE,MAAA,CAC9B,EACAtH,EAAAA,IAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,aAAA,CAAW,CAAA,CAAA,CACvE,CAAA,CACF,EACAA,MAACD,EAAA,CACC,SAAAD,EAAAA,KAACQ,EAAA,CAAY,UAAU,MACrB,SAAA,CAAAR,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACX,SAAA,EAAAwH,EAAM,WAAc,MAAQ,GAAI,QAAQ,CAAC,EAAE,KAAA,EAC/C,EACAtH,EAAAA,IAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,YAAA,CAAU,CAAA,CAAA,CACtE,CAAA,CACF,EACAA,MAACD,EAAA,CACC,SAAAD,EAAAA,KAACQ,EAAA,CAAY,UAAU,MACrB,SAAA,CAAAN,EAAAA,IAAC,MAAA,CAAI,UAAU,mDACZ,SAAAsH,EAAM,iBACT,EACAtH,EAAAA,IAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,kBAAA,CAAgB,CAAA,CAAA,CAC5E,CAAA,CACF,CAAA,EACF,EAIFF,EAAAA,KAAC,MAAA,CAAI,UAAU,uCACb,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAI,UAAU,SACb,SAAAA,EAAAA,IAACO,EAAA,CACC,KAAK,OACL,YAAY,kCACZ,MAAOwF,EACP,SAAWvF,GAAMwF,EAAexF,EAAE,OAAO,KAAK,EAC9C,KAAMR,EAAAA,IAACS,GAAA,CAAO,UAAU,SAAA,CAAU,EAClC,UAAU,QAAA,CAAA,EAEd,EAEAX,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAACM,EAAA,CACC,QAAQ,UACR,QAAS,IAAMwF,EAAe,CAACD,CAAW,EAC1C,UAAU,oBACV,cAAY,iBAEZ,SAAA,CAAA3F,EAAAA,IAACoI,GAAA,CAAkB,UAAU,cAAA,CAAe,EAAE,SAAA,CAAA,CAAA,EAIhDtI,EAAAA,KAAC,MAAA,CAAI,UAAU,8DACb,SAAA,CAAAE,EAAAA,IAACI,EAAA,CACC,QAASyF,IAAa,OAAS,UAAY,QAC3C,KAAK,KACL,QAAS,IAAMC,EAAY,MAAM,EACjC,UAAU,iBACV,cAAY,mBAEZ,SAAA9F,EAAAA,IAACqI,GAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAAA,EAE5BrI,EAAAA,IAACI,EAAA,CACC,QAASyF,IAAa,OAAS,UAAY,QAC3C,KAAK,KACL,QAAS,IAAMC,EAAY,MAAM,EACjC,UAAU,iBACV,cAAY,mBAEZ,SAAA9F,EAAAA,IAACsI,GAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAAA,CAC5B,EACF,EAEAtI,EAAAA,IAACI,EAAA,CACC,QAAQ,UACR,QAAS,IAAMsG,EAAc,CAACD,CAAU,EACxC,cAAY,gBAEZ,SAAAzG,EAAAA,IAACoF,EAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAAA,EAG9BpF,EAAAA,IAACI,EAAA,CACC,QAAQ,UACR,QAAS,IAAM+G,EAAA,EACf,SAAUF,EACV,cAAY,iBAEZ,eAACsB,GAAA,CAAU,UAAW,WAAWtB,EAAY,eAAiB,EAAE,EAAA,CAAI,CAAA,CAAA,CACtE,CAAA,CACF,CAAA,EACF,EAGAjH,EAAAA,IAACwI,GACE,SAAA/B,GACCzG,EAAAA,IAACyI,EAAO,IAAP,CACC,QAAS,CAAE,OAAQ,EAAG,QAAS,CAAA,EAC/B,QAAS,CAAE,OAAQ,OAAQ,QAAS,CAAA,EACpC,KAAM,CAAE,OAAQ,EAAG,QAAS,CAAA,EAC5B,WAAY,CAAE,SAAU,EAAA,EACxB,UAAU,uBAEV,SAAAzI,EAAAA,IAAC6C,GAAA,CACC,SAAU,SAAY,CAAEsE,EAAA,CAAU,CAAA,CAAA,CACpC,CAAA,EAGN,EAEArH,EAAAA,KAAC,MAAA,CAAI,UAAU,aAEb,SAAA,CAAAE,EAAAA,IAACwI,GACE,SAAA7C,GACC3F,EAAAA,IAACyI,EAAO,MAAP,CACC,QAAS,CAAE,MAAO,EAAG,QAAS,CAAA,EAC9B,QAAS,CAAE,MAAO,IAAK,QAAS,CAAA,EAChC,KAAM,CAAE,MAAO,EAAG,QAAS,CAAA,EAC3B,WAAY,CAAE,SAAU,EAAA,EACxB,UAAU,kBAEV,SAAAzI,EAAAA,IAACb,GAAA,CACC,QAAAC,EACA,gBAAiBmI,GACjB,QAASC,GACT,UAAU,eAAA,CAAA,CACZ,CAAA,EAGN,EAGA1H,EAAAA,KAAC,MAAA,CAAI,UAAU,iBAEZ,SAAA,CAAAkH,GACClH,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,CAAA,WAC/CkH,EAAc,MAAM,OAAO,OAAKA,EAAc,MAAM,eAAA,EAAiB,WAC7E5H,EAAQ,OACPU,EAAAA,KAAC,OAAA,CAAK,SAAA,CAAA,SAAYV,EAAQ,MAAM,GAAA,CAAA,CAAM,CAAA,EAE1C,EAEC+I,EAAa,GACZrI,OAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAE,EAAAA,IAACI,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IAAM2H,EAAiB,MAAM,EACtC,SAAUE,IAAgB,EAC1B,cAAY,mBAEZ,SAAAjI,EAAAA,IAAC0I,EAAA,CAAY,UAAU,SAAA,CAAU,CAAA,CAAA,EAEnC5I,EAAAA,KAAC,OAAA,CAAK,UAAU,2CAA2C,SAAA,CAAA,QACnDmI,EAAY,OAAKE,CAAA,EACzB,EACAnI,EAAAA,IAACI,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IAAM2H,EAAiB,MAAM,EACtC,SAAUE,IAAgBE,EAC1B,cAAY,mBAEZ,SAAAnI,EAAAA,IAAC2I,EAAA,CAAa,UAAU,SAAA,CAAU,CAAA,CAAA,CACpC,CAAA,CACF,CAAA,EAEJ,EAIDzB,GACClH,EAAAA,IAACD,EAAA,CAAK,UAAU,oBACd,gBAACO,EAAA,CACC,SAAA,CAAAN,EAAAA,IAAC,MAAA,CAAI,UAAU,oBACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,oBAAoB,KAAK,OAAO,QAAQ,YAAY,OAAO,eACxE,SAAAA,EAAAA,IAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,mDAAA,CAAoD,CAAA,CAC3H,CAAA,CACF,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,oDAAoD,SAAA,uBAElE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,oDAE7D,EACAA,EAAAA,IAACI,EAAA,CACC,QAAQ,UACR,QAAS,IAAM+G,EAAA,EACf,UAAU,OACV,cAAY,eACb,SAAA,WAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,EAID,CAACD,GACAlH,EAAAA,IAAC4I,GAAA,CACC,OAAO5B,GAAA,YAAAA,EAAe,QAAS,CAAA,EAC/B,QAASC,EACT,YAAaQ,GACb,YAAaC,EACb,gBAAiBC,CAAA,CAAA,EAKpBX,GAAiBmB,EAAa,GAC7BnI,EAAAA,IAAC,MAAA,CAAI,UAAU,4BACb,SAAAF,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAACM,EAAA,CACC,QAAQ,UACR,QAAS,IAAM2H,EAAiB,MAAM,EACtC,SAAUE,IAAgB,EAC1B,cAAY,wBAEZ,SAAA,CAAAjI,EAAAA,IAAC0I,EAAA,CAAY,UAAU,cAAA,CAAe,EAAE,UAAA,CAAA,CAAA,EAG1C5I,EAAAA,KAAC,OAAA,CAAK,UAAU,qDAAqD,SAAA,CAAA,QAC7DmI,EAAY,OAAKE,CAAA,EACzB,EACArI,EAAAA,KAACM,EAAA,CACC,QAAQ,UACR,QAAS,IAAM2H,EAAiB,MAAM,EACtC,SAAUE,IAAgBE,EAC1B,cAAY,wBACb,SAAA,CAAA,OAECnI,EAAAA,IAAC2I,EAAA,CAAa,UAAU,cAAA,CAAe,CAAA,CAAA,CAAA,CACzC,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,EAGA3I,EAAAA,IAACY,GAAA,CACC,MAAOqF,EACP,OAAQE,EACR,QAAS0B,GACT,WAAYF,EACZ,OAAQD,CAAA,CAAA,EAITzB,GAAiBI,GAChBrG,EAAAA,IAAC,MAAA,CAAI,UAAU,mEACb,SAAAF,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAE,EAAAA,IAACI,EAAA,CACC,QAAQ,QACR,KAAK,KACL,QAAS0H,EACT,UAAU,+DACX,SAAA,OAAA,CAAA,EAGD9H,EAAAA,IAAC6I,GAAA,CACC,MAAO5C,EACP,QAAS6B,CAAA,CAAA,CACX,CAAA,CACF,CAAA,CACF,CAAA,EAEJ,CAEJ"}