import{j as e,B as l,n as h}from"./index-BzqIBI_1.js";import{r as i,R as U}from"./router-CYAiCCsK.js";import{I as Q}from"./Input-DQaGiHGP.js";import{B as N}from"./Badge-CeVT3Lft.js";import{S as Y}from"./Collections-CnjrFI1E.js";import{a6 as S,$ as y,ao as w,b0 as C,z as I,A as k,m as T,C as D,n as M,I as V,R as g,a5 as W,aw as X,w as H,aq as J,b1 as O,y as ee,b2 as se,ad as te,Z as ae,D as ce,b3 as le}from"./ui-DhyrEzjX.js";import"./charts-BaIhTcLh.js";import"./utils-B26ZFImD.js";import"./Tabs-VczWTLgE.js";import"./Card-pVNkGvZm.js";import"./AIMetadata-CNrDn82p.js";const ge=()=>{const[n,r]=i.useState([]),[A,o]=i.useState(!1),[P,u]=i.useState(null),[j,f]=i.useState(null),[B,E]=i.useState(null),[x,z]=i.useState("all"),[m,L]=i.useState("all"),[d,$]=i.useState(""),v=i.useCallback(()=>{r([{id:"1",name:"Google Drive Backup",provider:"Google Drive",type:"storage",status:"connected",description:"Backup collection metadata and files to Google Drive",config:{apiKey:"••••••••••••••••",endpoint:"https://www.googleapis.com/drive/v3",webhookUrl:"https://catalogizer.app/webhooks/google-drive"},syncSettings:{enabled:!0,frequency:"daily",direction:"export",filters:[{field:"collection_type",operator:"equals",value:"movies"}]},statistics:{totalSyncs:45,successfulSyncs:43,failedSyncs:2,lastSyncStatus:"success",itemsProcessed:1250,lastSyncDuration:180,bytesTransferred:2048576e3},lastSync:"2024-01-21T02:30:00Z",createdAt:"2024-01-10T10:00:00Z",enabled:!0},{id:"2",name:"TMDB Metadata",provider:"The Movie Database",type:"metadata",status:"connected",description:"Fetch movie and TV show metadata from TMDB",config:{apiKey:"••••••••••••••••",endpoint:"https://api.themoviedb.org/3"},syncSettings:{enabled:!0,frequency:"realtime",direction:"import",filters:[{field:"media_type",operator:"in",value:["movie","tv"]}],mapping:{title:"original_title",overview:"overview",release_date:"release_date"}},statistics:{totalSyncs:1240,successfulSyncs:1235,failedSyncs:5,lastSyncStatus:"success",itemsProcessed:3420,lastSyncDuration:45},lastSync:"2024-01-21T14:25:00Z",createdAt:"2024-01-05T09:00:00Z",enabled:!0},{id:"3",name:"Plex Media Server",provider:"Plex",type:"sharing",status:"disconnected",description:"Share collections with Plex Media Server",config:{endpoint:"http://192.168.1.100:32400",username:"admin",password:"••••••••••••••••"},syncSettings:{enabled:!1,frequency:"manual",direction:"bidirectional",filters:[]},statistics:{totalSyncs:0,successfulSyncs:0,failedSyncs:0,lastSyncStatus:"pending",itemsProcessed:0},createdAt:"2024-01-18T16:45:00Z",enabled:!1},{id:"4",name:"Discord Notifications",provider:"Discord",type:"automation",status:"connected",description:"Send notifications to Discord channels",config:{webhookUrl:"https://discord.com/api/webhooks/••••••••••••••••"},syncSettings:{enabled:!0,frequency:"realtime",direction:"export",filters:[{field:"event_type",operator:"in",value:["new_movie","collection_update"]}]},statistics:{totalSyncs:67,successfulSyncs:67,failedSyncs:0,lastSyncStatus:"success",itemsProcessed:67},lastSync:"2024-01-21T15:30:00Z",createdAt:"2024-01-12T14:20:00Z",enabled:!0}])},[]);i.useEffect(()=>{v()},[v]);const b=U.useMemo(()=>{let s=[...n];return x==="connected"?s=s.filter(t=>t.status==="connected"):x==="disconnected"&&(s=s.filter(t=>t.status!=="connected")),m!=="all"&&(s=s.filter(t=>t.type===m)),d&&(s=s.filter(t=>t.name.toLowerCase().includes(d.toLowerCase())||t.provider.toLowerCase().includes(d.toLowerCase())||t.description.toLowerCase().includes(d.toLowerCase()))),s},[n,x,m,d]),q=async s=>{r(t=>t.map(a=>a.id===s?{...a,enabled:!a.enabled}:a)),h.success("Integration status updated")},F=async s=>{f(s),setTimeout(()=>{f(null),r(t=>t.map(a=>a.id===s?{...a,status:Math.random()>.2?"connected":"error",lastSync:new Date().toISOString()}:a)),h.success("Connection test completed")},2e3)},Z=async s=>{const t=n.find(a=>a.id===s);!t||t.status!=="connected"||(r(a=>a.map(c=>c.id===s?{...c,lastSync:new Date().toISOString(),statistics:{...c.statistics,lastSyncStatus:"pending"}}:c)),setTimeout(()=>{r(a=>a.map(c=>c.id===s?{...c,statistics:{...c.statistics,totalSyncs:c.statistics.totalSyncs+1,successfulSyncs:c.statistics.successfulSyncs+1,lastSyncStatus:"success",itemsProcessed:c.statistics.itemsProcessed+Math.floor(Math.random()*50)}}:c)),h.success("Sync completed successfully")},3e3))},_=async s=>{r(t=>t.filter(a=>a.id!==s)),h.success("Integration deleted successfully")},p=s=>{switch(s){case"connected":return{icon:I,color:"text-green-500",bg:"bg-green-50"};case"disconnected":return{icon:se,color:"text-red-500",bg:"bg-red-50"};case"error":return{icon:ee,color:"text-red-500",bg:"bg-red-50"};case"connecting":return{icon:g,color:"text-blue-500",bg:"bg-blue-50"};default:return{icon:D,color:"text-gray-500",bg:"bg-gray-50"}}},K=s=>{switch(s){case"storage":return le;case"metadata":return ce;case"analytics":return M;case"automation":return ae;case"sharing":return te;default:return y}},R=s=>{if(!s)return"N/A";const t=["B","KB","MB","GB"],a=Math.floor(Math.log(s)/Math.log(1024));return`${(s/Math.pow(1024,a)).toFixed(1)} ${t[a]}`},G=s=>s?s<60?`${s}s`:s<3600?`${Math.floor(s/60)}m ${s%60}s`:`${Math.floor(s/3600)}h ${Math.floor(s%3600/60)}m`:"N/A";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"External Integrations"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Connect with external services to extend functionality"})]}),e.jsxs(l,{onClick:()=>o(!0),className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Add Integration"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg border p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Integrations"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]}),e.jsx(y,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Connected"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:n.filter(s=>s.status==="connected").length})]}),e.jsx(w,{className:"w-8 h-8 text-green-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active Syncs"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n.filter(s=>s.syncSettings.enabled).length})]}),e.jsx(C,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[n.length>0&&n.some(s=>s.statistics.totalSyncs>0)?Math.round(n.reduce((s,t)=>s+t.statistics.successfulSyncs,0)/n.reduce((s,t)=>s+t.statistics.totalSyncs,0)*100):0,"%"]})]}),e.jsx(I,{className:"w-8 h-8 text-green-500"})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between bg-white rounded-lg border p-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[["all","connected","disconnected"].map(s=>e.jsx(l,{variant:x===s?"default":"outline",size:"sm",onClick:()=>z(s),children:s.charAt(0).toUpperCase()+s.slice(1)},s)),e.jsxs("select",{value:m,onChange:s=>L(s.target.value),className:"px-3 py-1 text-sm border rounded-lg bg-white",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"storage",children:"Storage"}),e.jsx("option",{value:"metadata",children:"Metadata"}),e.jsx("option",{value:"analytics",children:"Analytics"}),e.jsx("option",{value:"automation",children:"Automation"}),e.jsx("option",{value:"sharing",children:"Sharing"})]})]}),e.jsx(Q,{placeholder:"Search integrations...",value:d,onChange:s=>$(s.target.value),className:"w-full sm:w-64"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{children:b.map(s=>{const t=p(s.status).icon,a=K(s.type),c=B===s.id;return e.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-white rounded-lg border hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.name}),e.jsx(N,{variant:"outline",children:s.provider}),e.jsx(N,{variant:"secondary",children:s.type}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${p(s.status).bg} ${p(s.status).color}`,children:[e.jsx(t,{className:"w-3 h-3"}),s.status]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a,{className:"w-3 h-3"}),s.type]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),s.syncSettings.enabled?`${s.syncSettings.frequency} sync`:"Sync disabled"]}),s.lastSync&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3"}),"Last sync: ",new Date(s.lastSync).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3"}),s.statistics.itemsProcessed," items processed"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(Y,{checked:s.enabled,onCheckedChange:()=>q(s.id)}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>E(c?null:s.id),children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>F(s.id),disabled:j===s.id,children:j===s.id?e.jsx(g,{className:"w-4 h-4 animate-spin"}):e.jsx(W,{className:"w-4 h-4"})}),s.status==="connected"&&e.jsx(l,{variant:"outline",size:"sm",onClick:()=>Z(s.id),children:e.jsx(g,{className:"w-4 h-4"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>u(s),children:e.jsx(X,{className:"w-4 h-4"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>_(s.id),children:e.jsx(H,{className:"w-4 h-4"})})]})]})}),e.jsx(k,{children:c&&e.jsx(T.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.2},className:"border-t overflow-hidden",children:e.jsxs("div",{className:"p-4 bg-gray-50 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm text-gray-700 mb-2",children:"Configuration"}),e.jsxs("div",{className:"bg-white rounded p-3 text-sm space-y-2",children:[s.config.endpoint&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Endpoint: "}),e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:s.config.endpoint})]}),s.config.webhookUrl&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Webhook: "}),e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs truncate max-w-xs",children:s.config.webhookUrl})]}),s.config.apiKey&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"API Key: "}),e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:s.config.apiKey})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm text-gray-700 mb-2",children:"Sync Settings"}),e.jsx("div",{className:"bg-white rounded p-3 text-sm",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Enabled: "}),e.jsx("span",{className:s.syncSettings.enabled?"text-green-600":"text-gray-600",children:s.syncSettings.enabled?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Frequency: "}),e.jsx("span",{className:"text-gray-600",children:s.syncSettings.frequency})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Direction: "}),e.jsx("span",{className:"text-gray-600",children:s.syncSettings.direction})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Filters: "}),e.jsx("span",{className:"text-gray-600",children:s.syncSettings.filters.length})]})]})})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm text-gray-700 mb-2",children:"Statistics"}),e.jsxs("div",{className:"bg-white rounded p-3",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.statistics.totalSyncs}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total Syncs"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.statistics.successfulSyncs}),e.jsx("p",{className:"text-xs text-gray-500",children:"Successful"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:s.statistics.failedSyncs}),e.jsx("p",{className:"text-xs text-gray-500",children:"Failed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.statistics.itemsProcessed}),e.jsx("p",{className:"text-xs text-gray-500",children:"Items"})]})]}),s.statistics.lastSyncDuration&&e.jsxs("div",{className:"mt-3 pt-3 border-t text-xs text-gray-600",children:["Last sync duration: ",G(s.statistics.lastSyncDuration),s.statistics.bytesTransferred&&e.jsxs("span",{className:"ml-3",children:["Data transferred: ",R(s.statistics.bytesTransferred)]})]})]})]})]})})})]},s.id)})}),b.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border",children:[e.jsx(y,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No integrations found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Connect with external services to extend your collection management capabilities"}),e.jsxs(l,{onClick:()=>o(!0),children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Add Your First Integration"]})]})]}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Add External Integration"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Integration setup interface would be implemented here with service discovery"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(l,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(l,{onClick:()=>o(!1),children:"Add Integration"})]})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Edit Integration"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Integration configuration interface would be implemented here"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(l,{variant:"outline",onClick:()=>u(null),children:"Cancel"}),e.jsx(l,{onClick:()=>u(null),children:"Save Changes"})]})]})})]})};export{ge as default};
//# sourceMappingURL=ExternalIntegrations-gZ1Ms1Ab.js.map
