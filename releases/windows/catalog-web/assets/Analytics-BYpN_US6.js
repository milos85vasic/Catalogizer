import{a as w,j as e}from"./index-BzqIBI_1.js";import{C as i,a as n,b as c,c as x,d as r}from"./Card-pVNkGvZm.js";import{m as k}from"./mediaApi-7GevB2yo.js";import{m as T,D as C,h as F,T as D,u as S,O as K,Q as q,V as L,v as R}from"./ui-DhyrEzjX.js";import{R as o,a as I,b as O,C as E,T as y,B as _,c as v,X as N,Y as b,d as A,A as G,e as U,f as $,g as z}from"./charts-BaIhTcLh.js";import"./router-CYAiCCsK.js";import"./utils-B26ZFImD.js";const B=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#14B8A6","#F97316"],g=({title:a,value:p,icon:d,change:l,changeType:h,trend:m})=>e.jsx(i,{className:"relative overflow-hidden",children:e.jsxs(r,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p}),l&&e.jsx("p",{className:`text-sm ${h==="positive"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:l})]}),e.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:d})]}),m&&e.jsx("div",{className:"mt-4 h-8",children:e.jsx(o,{width:"100%",height:"100%",children:e.jsx($,{data:m.map((u,j)=>({value:u,index:j})),children:e.jsx(z,{type:"monotone",dataKey:"value",stroke:h==="positive"?"#10B981":"#EF4444",strokeWidth:2,dot:!1})})})})]})}),J=()=>{var j,f;const{data:a,isLoading:p}=w({queryKey:["media-stats"],queryFn:k.getMediaStats,staleTime:3e5}),{data:d}=w({queryKey:["recent-media",20],queryFn:()=>k.getRecentMedia(20),staleTime:1e3*60*5}),l=a?Object.entries(a.by_type).map(([s,t])=>({name:s.replace("_"," ").toUpperCase(),value:t,count:t})):[],h=a?Object.entries(a.by_quality).map(([s,t])=>({name:s.toUpperCase(),value:t,count:t})):[],m=Array.from({length:30},(s,t)=>({day:t+1,items:Math.floor(Math.random()*50)+((a==null?void 0:a.total_items)||0)-1e3+t*10,size:Math.floor(Math.random()*100)+500+t*20})),u=Array.from({length:7},(s,t)=>({day:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][t],additions:Math.floor(Math.random()*20)+5}));return p?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded w-1/4 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map((s,t)=>e.jsx("div",{className:"h-32 bg-gray-300 dark:bg-gray-600 rounded-xl"},t))})]})}):e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Insights and statistics about your media collection"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(g,{title:"Total Media Items",value:((j=a==null?void 0:a.total_items)==null?void 0:j.toLocaleString())||"0",icon:e.jsx(C,{className:"h-8 w-8"}),change:"+12% from last month",changeType:"positive",trend:[45,52,48,61,67,73,82]}),e.jsx(g,{title:"Storage Used",value:`${(((a==null?void 0:a.total_size)||0)/1024**3).toFixed(1)} GB`,icon:e.jsx(F,{className:"h-8 w-8"}),change:"+8.2 GB this week",changeType:"positive",trend:[120,125,128,135,142,148,155]}),e.jsx(g,{title:"Recent Additions",value:((f=a==null?void 0:a.recent_additions)==null?void 0:f.toString())||"0",icon:e.jsx(D,{className:"h-8 w-8"}),change:"+5 from yesterday",changeType:"positive",trend:[8,12,15,11,18,22,25]}),e.jsx(g,{title:"Media Types",value:Object.keys((a==null?void 0:a.by_type)||{}).length.toString(),icon:e.jsx(S,{className:"h-8 w-8"}),change:"2 new types detected",changeType:"positive",trend:[6,7,7,8,8,9,10]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"Media Types Distribution"}),e.jsx(x,{children:"Breakdown of your media collection by type"})]}),e.jsx(r,{children:e.jsx("div",{className:"h-80",children:e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(I,{children:[e.jsx(O,{data:l,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:t})=>`${s} ${(t*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:l.map((s,t)=>e.jsx(E,{fill:B[t%B.length]},`cell-${t}`))}),e.jsx(y,{formatter:s=>[s,"Items"]})]})})})})]}),e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"Quality Distribution"}),e.jsx(x,{children:"Media items by quality level"})]}),e.jsx(r,{children:e.jsx("div",{className:"h-80",children:e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(_,{data:h,children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"name"}),e.jsx(b,{}),e.jsx(y,{formatter:s=>[s,"Items"]}),e.jsx(A,{dataKey:"value",fill:"#3B82F6"})]})})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"Collection Growth"}),e.jsx(x,{children:"Media items and storage growth over time"})]}),e.jsx(r,{children:e.jsx("div",{className:"h-80",children:e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(G,{data:m,children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"day"}),e.jsx(b,{}),e.jsx(y,{}),e.jsx(U,{type:"monotone",dataKey:"items",stackId:"1",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.6})]})})})})]}),e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"Weekly Activity"}),e.jsx(x,{children:"New media items added each day this week"})]}),e.jsx(r,{children:e.jsx("div",{className:"h-80",children:e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(_,{data:u,children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"day"}),e.jsx(b,{}),e.jsx(y,{formatter:s=>[s,"Items Added"]}),e.jsx(A,{dataKey:"additions",fill:"#10B981"})]})})})})]})]}),e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"Recently Added Media"}),e.jsx(x,{children:"Your latest additions to the collection"})]}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:d==null?void 0:d.slice(0,10).map(s=>{const t=M=>{switch(M.toLowerCase()){case"movie":case"tv_show":return e.jsx(R,{className:"h-4 w-4"});case"music":return e.jsx(L,{className:"h-4 w-4"});case"game":return e.jsx(q,{className:"h-4 w-4"});case"software":return e.jsx(K,{className:"h-4 w-4"});default:return e.jsx(C,{className:"h-4 w-4"})}};return e.jsxs("div",{className:"flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:t(s.media_type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.title}),s.year&&e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",s.year,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs dark:bg-blue-900 dark:text-blue-200",children:s.media_type.replace("_"," ")}),s.quality&&e.jsx("span",{children:s.quality.toUpperCase()}),s.file_size&&e.jsxs("span",{children:[((s.file_size||0)/1024**2).toFixed(0)," MB"]})]})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(s.created_at).toLocaleDateString()})]},s.id)})})})]})]})})};export{J as Analytics};
//# sourceMappingURL=Analytics-BYpN_US6.js.map
