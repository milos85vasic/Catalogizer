import{j as e,B as o,t as h,g as u}from"./index-BzqIBI_1.js";import{R as p,r as y}from"./router-CYAiCCsK.js";import{C as j,d as v}from"./Card-pVNkGvZm.js";import{F as f}from"./FavoriteToggle-C1Ak6xgo.js";import{m as g,q as N,f as b,o as k,t as w,u as C,h as _,C as $,aq as z,v as x,aJ as B,O as M,Q as F,V as L}from"./ui-DhyrEzjX.js";const I=s=>{switch(s.toLowerCase()){case"movie":case"tv_show":case"documentary":case"anime":return e.jsx(x,{className:"h-5 w-5"});case"music":case"audiobook":case"podcast":return e.jsx(L,{className:"h-5 w-5"});case"game":return e.jsx(F,{className:"h-5 w-5"});case"software":return e.jsx(M,{className:"h-5 w-5"});case"ebook":case"training":return e.jsx(B,{className:"h-5 w-5"});default:return e.jsx(x,{className:"h-5 w-5"})}},q=s=>{if(!s)return"bg-gray-100 text-gray-800";switch(s.toLowerCase()){case"4k":case"hdr":case"dolby_vision":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"1080p":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"720p":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},D=s=>{if(!s)return"Unknown";const t=["B","KB","MB","GB","TB"];let a=s,r=0;for(;a>=1024&&r<t.length-1;)a/=1024,r++;return`${a.toFixed(1)} ${t[r]}`},E=s=>{if(!s)return null;const t=Math.floor(s/60),a=s%60;return t>0?`${t}h ${a}m`:`${a}m`},P=p.memo(({media:s,onView:t,onPlay:a,onDownload:r,className:i=""})=>e.jsx(g.div,{whileHover:{y:-4},transition:{duration:.2},className:i,"data-testid":`media-item-${s.id}`,children:e.jsxs(j,{className:"h-full overflow-hidden hover:shadow-xl transition-all duration-300 group",children:[e.jsxs("div",{className:"relative aspect-[3/4] bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800",children:[s.cover_image?e.jsx("img",{src:s.cover_image,alt:s.title,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 dark:text-gray-500",children:I(s.media_type)}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsxs("div",{className:"flex space-x-2",children:[a&&e.jsx(o,{size:"sm",variant:"glass",onClick:l=>{l.stopPropagation(),a(s)},"data-testid":`play-button-${s.id}`,children:e.jsx(N,{className:"h-4 w-4"})}),t&&e.jsx(o,{size:"sm",variant:"glass",onClick:l=>{l.stopPropagation(),t(s)},"data-testid":`view-button-${s.id}`,children:e.jsx(b,{className:"h-4 w-4"})}),r&&e.jsx(o,{size:"sm",variant:"glass",onClick:l=>{l.stopPropagation(),r(s)},"data-testid":`download-button-${s.id}`,children:e.jsx(k,{className:"h-4 w-4"})})]})}),s.quality&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${q(s.quality)}`,children:s.quality.toUpperCase()})}),e.jsx(f,{mediaId:s.id,mediaItem:s,variant:"card",size:"md"}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-black/50 text-white backdrop-blur-sm",children:s.media_type.replace("_"," ").toUpperCase()})})]}),e.jsxs(v,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.year&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),s.year]}),s.rating&&e.jsxs("div",{className:"flex items-center text-sm text-yellow-600",children:[e.jsx(C,{className:"h-4 w-4 mr-1 fill-current"}),s.rating.toFixed(1)]})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:h(s.description,100)}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-500 dark:text-gray-400",children:[s.file_size&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"h-3 w-3 mr-1"}),D(s.file_size)]}),s.duration&&e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"h-3 w-3 mr-1"}),E(s.duration)]})]}),s.versions&&s.versions.length>1&&e.jsx("div",{className:"mt-3",children:e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.versions.length," versions available"]})}),s.external_metadata&&s.external_metadata.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.external_metadata.length," external source",s.external_metadata.length>1?"s":""]})]})}),e.jsxs("div",{className:"mt-3 text-xs text-gray-400",children:["Updated ",u(s.updated_at)]})]})]})})),S=()=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"aspect-[3/4] bg-gray-300 dark:bg-gray-600 rounded-lg mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-2/3"})]})]}),V=({media:s,loading:t=!1,viewMode:a="grid",onMediaView:r,onMediaPlay:i,onMediaDownload:l,onSelect:T,selectedItems:U=[],showActions:G=!0,className:d=""})=>{const m=y.useMemo(()=>a==="grid"?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6":"grid-cols-1",[a]);return t?e.jsx("div",{className:`grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6 ${d}`,children:Array.from({length:12}).map((n,c)=>e.jsx(S,{},c))}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 dark:text-gray-500 mb-4",children:e.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"No media found"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Try adjusting your search criteria or add some media to your collection."})]}):e.jsx("div",{className:`grid ${m} gap-6 ${d}`,children:s.map((n,c)=>e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:c*.05},children:e.jsx(P,{media:n,onView:r,onPlay:i,onDownload:l})},n.id))})};export{V as M};
//# sourceMappingURL=MediaGrid-BESADauV.js.map
