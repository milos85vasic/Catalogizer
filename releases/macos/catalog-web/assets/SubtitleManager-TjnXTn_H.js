import{b as f,j as e,c as he,a as T,e as B}from"./index-BzqIBI_1.js";import{r as l}from"./router-CYAiCCsK.js";import{m as ye}from"./mediaApi-7GevB2yo.js";import{m,C as ae,X as E,R,q as pe,y as se,z as M,p as G,Y as J,$ as O,v as X,A as q,S as Q,r as be,f as Y,o as fe,a0 as Z,w as je}from"./ui-DhyrEzjX.js";import"./charts-BaIhTcLh.js";import"./utils-B26ZFImD.js";const k={searchSubtitles:r=>f.get("/subtitles/search",{params:r}).then(i=>i.data),downloadSubtitle:r=>f.post("/subtitles/download",r).then(i=>i.data),getMediaSubtitles:r=>f.get(`/subtitles/media/${r}`).then(i=>i.data),verifySync:(r,i,u)=>f.get(`/subtitles/${r}/verify-sync/${i}`,{params:u}).then(h=>h.data),translateSubtitle:r=>f.post("/subtitles/translate",r).then(i=>i.data),getSupportedLanguages:()=>f.get("/subtitles/languages").then(r=>r.data),getSupportedProviders:()=>f.get("/subtitles/providers").then(r=>r.data),deleteSubtitle:r=>f.delete(`/subtitles/${r}`).then(i=>i.data),updateSubtitle:(r,i)=>f.put(`/subtitles/${r}`,i).then(u=>u.data),uploadSubtitle:(r,i,u,h)=>{const c=new FormData;return c.append("file",i),c.append("media_id",r.toString()),c.append("language",u),h&&c.append("format",h),f.post("/subtitles/upload",c,{headers:{"Content-Type":"multipart/form-data"}}).then(x=>x.data)}},ve=({isOpen:r,onClose:i,subtitleId:u,mediaId:h,subtitleLanguage:c})=>{const[x,j]=l.useState(!1),[n,s]=l.useState(null),[v,N]=l.useState(60),[y,p]=l.useState(5),b=async()=>{j(!0);try{const d=await k.verifySync(u,h,{sample_duration:v,sensitivity:y});s(d)}catch(d){console.error("Verification failed:",d),s({success:!1,status:"unusable",error:d instanceof Error?d.message:"Verification failed"})}finally{j(!1)}},g=d=>{switch(d){case"perfect":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/20";case"good":return"text-blue-600 bg-blue-100 dark:text-blue-400 dark:bg-blue-900/20";case"acceptable":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/20";case"poor":return"text-orange-600 bg-orange-100 dark:text-orange-400 dark:bg-orange-900/20";case"unusable":return"text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/20";default:return"text-gray-600 bg-gray-100 dark:text-gray-400 dark:bg-gray-900/20"}},F=d=>{switch(d){case"perfect":case"good":return e.jsx(M,{className:"w-5 h-5"});default:return e.jsx(se,{className:"w-5 h-5"})}};return r?e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:i,children:e.jsxs(m.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full p-6",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5"}),"Verify Subtitle Sync"]}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(E,{className:"w-5 h-5"})})]}),c&&e.jsxs("div",{className:"mb-4 text-sm text-gray-600 dark:text-gray-400",children:["Verifying sync for ",e.jsx("span",{className:"font-medium",children:c})," subtitle"]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sample Duration (seconds)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:"30",max:"300",step:"30",value:v,onChange:d=>N(Number(d.target.value)),className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium w-20 text-center",children:[v,"s"]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Longer durations provide more accurate results but take longer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sensitivity"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:"1",max:"10",value:y,onChange:d=>p(Number(d.target.value)),className:"flex-1"}),e.jsx("span",{className:"text-sm font-medium w-8 text-center",children:y})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Higher sensitivity detects smaller sync issues but may produce false positives"})]})]}),n&&e.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`rounded-lg p-4 mb-6 ${g(n.status)}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[F(n.status),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium capitalize",children:[n.status," Sync"]}),e.jsx("div",{className:"text-sm opacity-75",children:n.message})]})]}),n.success&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.sync_offset!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"opacity-75",children:"Sync Offset:"}),e.jsxs("div",{className:"font-medium",children:[n.sync_offset>0?"+":"",n.sync_offset,"ms"]})]}),n.confidence!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"opacity-75",children:"Confidence:"}),e.jsxs("div",{className:"font-medium",children:[(n.confidence*100).toFixed(1),"%"]})]}),n.sync_score!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"opacity-75",children:"Sync Score:"}),e.jsx("div",{className:"font-medium",children:n.sync_score.toFixed(2)})]})]}),n.error&&e.jsxs("div",{className:"mt-3 text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Error:"}),e.jsx("div",{className:"font-medium",children:n.error})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:b,disabled:x,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 flex items-center justify-center gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4 animate-spin"}),"Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-4 h-4"}),"Start Verification"]})}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Close"})]}),e.jsx("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-500 text-center",children:"Verification analyzes audio patterns to detect subtitle synchronization issues"})]})}):null},ee=["srt","vtt","ass","ssa","sub"],te=[{code:"en",name:"English",native_name:"English"},{code:"es",name:"Spanish",native_name:"Español"},{code:"fr",name:"French",native_name:"Français"},{code:"de",name:"German",native_name:"Deutsch"},{code:"it",name:"Italian",native_name:"Italiano"},{code:"pt",name:"Portuguese",native_name:"Português"},{code:"ru",name:"Russian",native_name:"Русский"},{code:"ja",name:"Japanese",native_name:"日本語"},{code:"zh",name:"Chinese",native_name:"中文"},{code:"ko",name:"Korean",native_name:"한국어"},{code:"ar",name:"Arabic",native_name:"العربية"},{code:"hi",name:"Hindi",native_name:"हिन्दी"},{code:"sv",name:"Swedish",native_name:"Svenska"},{code:"no",name:"Norwegian",native_name:"Norsk"},{code:"da",name:"Danish",native_name:"Dansk"},{code:"nl",name:"Dutch",native_name:"Nederlands"},{code:"fi",name:"Finnish",native_name:"Suomi"},{code:"pl",name:"Polish",native_name:"Polski"},{code:"tr",name:"Turkish",native_name:"Türkçe"},{code:"cs",name:"Czech",native_name:"Čeština"}],Ne=({isOpen:r,onClose:i,mediaId:u,mediaTitle:h,onUploadSuccess:c})=>{const[x,j]=l.useState(null),[n,s]=l.useState(""),[v,N]=l.useState(""),[y,p]=l.useState(!1),[b,g]=l.useState(null),[F,d]=l.useState(!1),w=l.useRef(null),D=t=>{var o;if(t&&(t.name.endsWith(".srt")||t.name.endsWith(".vtt")||t.name.endsWith(".ass")||t.name.endsWith(".ssa")||t.name.endsWith(".sub"))){j(t);const S=(o=t.name.split(".").pop())==null?void 0:o.toLowerCase();S&&ee.includes(S)&&N(S),g(null)}else g({success:!1,message:"Invalid file format. Please select a subtitle file (.srt, .vtt, .ass, .ssa, .sub)"})},A=t=>{t.preventDefault(),d(!1);const o=t.dataTransfer.files;o.length>0&&D(o[0])},L=t=>{t.preventDefault(),d(!0)},I=t=>{t.preventDefault(),d(!1)},U=t=>{const o=t.target.files;o&&o.length>0&&D(o[0])},V=async()=>{if(!x||!n){g({success:!1,message:"Please select a file and language"});return}p(!0);try{const t=await k.uploadSubtitle(u,x,n,v||void 0);t.success?(g({success:!0,message:t.message||"Subtitle uploaded successfully!"}),c==null||c(),setTimeout(()=>{j(null),s(""),N(""),g(null),w.current&&(w.current.value="")},2e3)):g({success:!1,message:t.error||"Upload failed"})}catch(t){g({success:!1,message:t instanceof Error?t.message:"Upload failed"})}finally{p(!1)}},P=()=>{j(null),s(""),N(""),g(null),w.current&&(w.current.value="")},$=t=>{if(t===0)return"0 Bytes";const o=1024,S=["Bytes","KB","MB","GB"],_=Math.floor(Math.log(t)/Math.log(o));return parseFloat((t/Math.pow(o,_)).toFixed(2))+" "+S[_]};return r?e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:i,children:e.jsxs(m.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full p-6",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),"Upload Subtitle"]}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(E,{className:"w-5 h-5"})})]}),h&&e.jsxs("div",{className:"mb-4 text-sm text-gray-600 dark:text-gray-400",children:["Uploading for ",e.jsx("span",{className:"font-medium",children:h})]}),e.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 mb-4 transition-colors ${F?"border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,onDrop:A,onDragOver:L,onDragLeave:I,children:e.jsxs("div",{className:"text-center",children:[e.jsx(J,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Drag and drop your subtitle file here, or click to browse"}),e.jsx("input",{ref:w,type:"file",accept:".srt,.vtt,.ass,.ssa,.sub",onChange:U,className:"hidden"}),e.jsx("button",{onClick:()=>{var t;return(t=w.current)==null?void 0:t.click()},className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Browse Files"})]})}),x&&e.jsx(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-8 h-8 text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:x.name}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:$(x.size)})]}),e.jsx("button",{onClick:P,className:"p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(E,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(O,{className:"w-4 h-4 inline mr-1"}),"Language"]}),e.jsxs("select",{value:n,onChange:t=>s(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select language..."}),te.map(t=>e.jsxs("option",{value:t.code,children:[t.native_name," (",t.name,")"]},t.code))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Format"}),e.jsxs("select",{value:v,onChange:t=>N(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Auto-detect..."}),ee.map(t=>e.jsx("option",{value:t,children:t.toUpperCase()},t))]})]}),b&&e.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`rounded-lg p-3 mb-6 flex items-center gap-3 ${b.success?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200"}`,children:[b.success?e.jsx(M,{className:"w-5 h-5"}):e.jsx(se,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:b.message})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:V,disabled:y||!x||!n,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4"}),"Upload Subtitle"]})}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"})]}),e.jsx("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-500 text-center",children:"Supported formats: SRT, VTT, ASS, SSA, SUB"})]})}):null},De=()=>{const[r,i]=l.useState(""),[u,h]=l.useState(""),[c,x]=l.useState([]),[j,n]=l.useState(!1),[s,v]=l.useState(null),[N,y]=l.useState(!1),[p,b]=l.useState(!1),[g,F]=l.useState(1),[d,w]=l.useState(20),[D,A]=l.useState(!1),[L,I]=l.useState(null),[U,V]=l.useState(!1),P=he(),{data:$=te}=T({queryKey:["subtitle-languages"],queryFn:()=>k.getSupportedLanguages()}),{data:t=[]}=T({queryKey:["subtitle-providers"],queryFn:()=>k.getSupportedProviders()}),{data:o,isLoading:S}=T({queryKey:["media-search",r,g],queryFn:()=>{const a={query:r||void 0,limit:10,offset:(g-1)*10};return ye.searchMedia(a)},enabled:p&&r.length>0}),{data:_,isLoading:W,mutate:re}=B({mutationFn:a=>k.searchSubtitles(a),onSuccess:()=>{y(!0)}}),{data:z,isLoading:ie}=T({queryKey:["media-subtitles",s==null?void 0:s.id],queryFn:()=>s?k.getMediaSubtitles(s.id):null,enabled:!!s}),K=B({mutationFn:({id:a,mediaPath:C})=>k.downloadSubtitle({id:a,media_path:C||(s==null?void 0:s.directory_path)}),onSuccess:()=>{P.invalidateQueries({queryKey:["media-subtitles",s==null?void 0:s.id]})}}),le=B({mutationFn:a=>k.deleteSubtitle(a),onSuccess:()=>{P.invalidateQueries({queryKey:["media-subtitles",s==null?void 0:s.id]})}}),ne=a=>{v(a),b(!1),i("")},H=()=>{r.trim()&&(p||re({query:r,language:u,media_path:s==null?void 0:s.directory_path,title:s==null?void 0:s.title,year:s==null?void 0:s.year,providers:c.length>0?c:void 0,limit:d,offset:(g-1)*d}))},de=a=>{K.mutate({id:a.id,mediaPath:s==null?void 0:s.directory_path})},ce=a=>{confirm("Are you sure you want to delete this subtitle?")&&le.mutate(a)},oe=(a,C)=>{I({id:a,language:C}),A(!0)},me=()=>{P.invalidateQueries({queryKey:["media-subtitles",s==null?void 0:s.id]})},ge=a=>{x(C=>C.includes(a)?C.filter(ue=>ue!==a):[...C,a])},xe=()=>{b(!p),y(!1),i("")};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Subtitle Manager"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Search, download, and manage subtitles for your media collection"})]}),e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5"}),"Selected Media"]}),e.jsxs("div",{className:"flex gap-2",children:[s&&e.jsxs("button",{onClick:()=>V(!0),className:"px-4 py-2 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-lg hover:bg-green-200 dark:hover:bg-green-800 flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Upload Subtitle"]}),e.jsx("button",{onClick:xe,className:"px-4 py-2 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-800 flex items-center gap-2",children:s?"Change Media":"Select Media"})]})]}),s?e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white text-lg",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:s.media_type}),s.year&&e.jsx("span",{children:s.year}),s.quality&&e.jsx("span",{children:s.quality})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2 truncate",children:s.directory_path})]}),e.jsx("button",{onClick:()=>v(null),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(E,{className:"w-4 h-4"})})]})}):e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(X,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No media selected"}),e.jsx("p",{className:"text-sm mt-1",children:"Select a media item to manage its subtitles"})]})]}),e.jsx(q,{children:p&&e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5"}),"Search for Media"]}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("input",{type:"text",value:r,onChange:a=>i(a.target.value),placeholder:"Search for movies, TV shows, etc...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:a=>a.key==="Enter"&&r.trim()&&F(1)}),e.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"})]}),o&&o.items.length>0&&e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:o.items.map(a=>e.jsxs("div",{onClick:()=>ne(a),className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 hover:bg-gray-50 dark:hover:bg-gray-750 cursor-pointer transition-colors",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:a.title}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:a.media_type}),a.year&&e.jsx("span",{children:a.year}),a.quality&&e.jsx("span",{children:a.quality})]})]},a.id))}),S&&e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(R,{className:"w-6 h-6 animate-spin text-blue-600"})})]})}),!p&&e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5"}),"Search Subtitles"]}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("input",{type:"text",value:r,onChange:a=>i(a.target.value),placeholder:s?`Search subtitles for "${s.title}"...`:"Search subtitles by title, filename, or keywords...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:a=>a.key==="Enter"&&H()}),e.jsxs("button",{onClick:()=>n(!j),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"Filters"]}),e.jsxs("button",{onClick:H,disabled:W||!r.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[W?e.jsx(R,{className:"w-4 h-4 animate-spin"}):e.jsx(Q,{className:"w-4 h-4"}),"Search"]})]}),e.jsx(q,{children:j&&e.jsx(m.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(O,{className:"w-4 h-4 inline mr-1"}),"Language"]}),e.jsxs("select",{value:u,onChange:a=>h(a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"All Languages"}),$.map(a=>e.jsxs("option",{value:a.code,children:[a.native_name," (",a.name,")"]},a.code))]})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Providers"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(a=>e.jsx("button",{onClick:()=>ge(a.name),className:`px-3 py-1 rounded-full text-sm transition-colors ${c.includes(a.name)?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"} ${a.enabled?"":"opacity-50 cursor-not-allowed"}`,disabled:!a.enabled,children:a.display_name},a.name))})]})]})})})]}),e.jsx(q,{children:N&&_&&e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Search Results (",_.total," found)"]}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"×"})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:_.results.map(a=>e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:a.title}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-3 h-3"}),a.language_name]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"w-3 h-3"}),a.provider]}),a.rating&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3"}),a.rating,"/10"]}),a.release&&e.jsxs("span",{children:["Release: ",a.release]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500 dark:text-gray-500",children:[a.hearing_impaired&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:"HI"}),a.foreign_parts_only&&e.jsx("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded",children:"Foreign Parts Only"}),a.machine_translated&&e.jsx("span",{className:"px-2 py-1 bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded",children:"Machine Translated"})]})]}),e.jsxs("button",{onClick:()=>de(a),disabled:K.isLoading,className:"ml-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 flex items-center gap-2",children:[K.isLoading?e.jsx(R,{className:"w-4 h-4 animate-spin"}):e.jsx(fe,{className:"w-4 h-4"}),"Download"]})]})},a.id))})]})}),s&&e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),'Subtitles for "',s.title,'"']}),ie?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(R,{className:"w-8 h-8 animate-spin text-blue-600"})}):z&&z.subtitles.length>0?e.jsx("div",{className:"space-y-3",children:z.subtitles.map(a=>e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:a.language_name}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-3 h-3"}),a.provider]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"w-3 h-3"}),a.format," • ",a.encoding]}),a.sync_offset!==void 0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-3 h-3"}),"Offset: ",a.sync_offset,"ms"]}),a.verified&&e.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(M,{className:"w-3 h-3"}),"Verified"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>oe(a.id,a.language_name),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-700 rounded",title:"Verify Sync",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ce(a.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-gray-700 rounded",title:"Delete",children:e.jsx(je,{className:"w-4 h-4"})})]})]})},a.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No subtitles found for this media item"}),e.jsx("p",{className:"text-sm mt-1",children:"Search and download subtitles to get started"})]})]}),e.jsx(q,{children:D&&L&&s&&e.jsx(ve,{isOpen:D,onClose:()=>A(!1),subtitleId:L.id,mediaId:s.id,subtitleLanguage:L.language})}),e.jsx(q,{children:U&&s&&e.jsx(Ne,{isOpen:U,onClose:()=>V(!1),mediaId:s.id,mediaTitle:s.title,onUploadSuccess:me})})]})};export{De as SubtitleManager};
//# sourceMappingURL=SubtitleManager-TjnXTn_H.js.map
